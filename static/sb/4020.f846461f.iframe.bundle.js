(self.webpackChunk_openremote_workshop=self.webpackChunk_openremote_workshop||[]).push([[4020],{"../../component/core/lib/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{ks:()=>DEFAULT_LANGUAGES,rO:()=>DefaultBoxShadow,w5:()=>DefaultBoxShadowBottom,WO:()=>DefaultColor1,PR:()=>DefaultColor2,Iy:()=>DefaultColor3,BB:()=>DefaultColor4,Id:()=>DefaultColor5,PX:()=>DefaultColor6,BH:()=>DefaultColor8,Kk:()=>DefaultHeaderHeight,IM:()=>ORError,m0:()=>OREvent,J0:()=>util_namespaceObject,Ay:()=>core_lib,m8:()=>manager,B1:()=>subscribe});var util_namespaceObject={};__webpack_require__.r(util_namespaceObject),__webpack_require__.d(util_namespaceObject,{Deferred:()=>Deferred,arrayRemove:()=>arrayRemove,blobToBase64:()=>blobToBase64,camelCaseToSentenceCase:()=>camelCaseToSentenceCase,capitaliseFirstLetter:()=>capitaliseFirstLetter,cronStringToISOString:()=>cronStringToISOString,dateToCronString:()=>dateToCronString,disableScroll:()=>disableScroll,dispatchCancellableEvent:()=>dispatchCancellableEvent,enableScroll:()=>enableScroll,enumContains:()=>enumContains,formatCronString:()=>formatCronString,getAllowedValueLabel:()=>getAllowedValueLabel,getAssetTypeLabel:()=>getAssetTypeLabel,getAttributeLabel:()=>getAttributeLabel,getAttributeUnits:()=>getAttributeUnits,getAttributeValueAsString:()=>getAttributeValueAsString,getAttributeValueConstraints:()=>getAttributeValueConstraints,getAttributeValueFormat:()=>getAttributeValueFormat,getBrowserLanguage:()=>getBrowserLanguage,getEnumKeyAsString:()=>getEnumKeyAsString,getGeoNotificationsFromRulesSet:()=>getGeoNotificationsFromRulesSet,getMetaItemNameValueHolder:()=>getMetaItemNameValueHolder,getMetaLabel:()=>getMetaLabel,getMetaUnits:()=>getMetaUnits,getMetaValue:()=>getMetaValue,getMetaValueAsString:()=>getMetaValueAsString,getMetaValueConstraints:()=>getMetaValueConstraints,getMetaValueFormat:()=>getMetaValueFormat,getQueryParameter:()=>getQueryParameter,getQueryParameters:()=>getQueryParameters,getValueAsString:()=>getValueAsString,getValueDescriptorLabel:()=>getValueDescriptorLabel,getWeekNumber:()=>getWeekNumber,hasMetaItem:()=>hasMetaItem,isFunction:()=>isFunction,isObject:()=>isObject,isTimeDuration:()=>isTimeDuration,isTimeDurationNegativeInfinity:()=>isTimeDurationNegativeInfinity,isTimeDurationPositiveInfinity:()=>isTimeDurationPositiveInfinity,loadJs:()=>loadJs,mergeObjects:()=>mergeObjects,objectsEqual:()=>objectsEqual,realmRoleFilter:()=>realmRoleFilter,resolveUnits:()=>resolveUnits,sentenceCaseToCamelCase:()=>sentenceCaseToCamelCase,sortByNumber:()=>sortByNumber,sortByString:()=>sortByString,stringMatch:()=>stringMatch,updateAsset:()=>updateAsset});__webpack_require__("../../../node_modules/url-search-params-polyfill/index.js");var i18next=__webpack_require__("../../../node_modules/i18next/dist/esm/i18next.js"),lib=__webpack_require__("../../../node_modules/qs/lib/index.js"),lib_default=__webpack_require__.n(lib),model_lib=__webpack_require__("../../component/model/lib/index.js"),moment=__webpack_require__("../../../node_modules/moment/moment.js"),moment_default=__webpack_require__.n(moment);class Deferred{get resolve(){return this._resolve}get reject(){return this._reject}get promise(){return this._promise}constructor(){this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t})),Object.freeze(this)}}function getBrowserLanguage(){return navigator.language.split("-")[0]||"en"}function getQueryParameters(e){return lib_default().parse(e,{ignoreQueryPrefix:!0})}function getQueryParameter(e){let t;if(location.search&&""!==location.search&&(t=getQueryParameters(location.search)),location.hash){const e=location.hash.indexOf("?");e>-1&&(t=getQueryParameters(location.hash.substring(e+1)))}return t?t[e]:void 0}function getGeoNotificationsFromRulesSet(e){const t=[];return e.rules.forEach((e=>{if(e.when&&e.then&&e.then.length>0){const r=new Map;(function addGeofencePredicatesFromRuleCondition(e,t,r){if(!e)return;const n=[];e.groups&&e.groups.forEach((e=>{e.items&&e.items.forEach((e=>{n.push(e)}))})),e.items&&e.items.forEach((e=>{n.push(e)})),n&&n.forEach((e=>{if(e.assets&&e.assets.attributes){const n=[];if(addGeoNotificationsFromAttributePredicateCondition(e.assets.attributes,n),n.length>0){const o=e.tag||t.toString();r.set(o,n)}}}))})(e.when,0,r),r.size>0&&e.then.forEach((e=>function addPushNotificationsFromRuleAction(e,t){if(e&&"notification"===e.action&&e.notification&&e.notification.message&&"push"===e.notification.message.type){const r=e.target;if(r&&r.conditionAssets){const n=t.get(r.conditionAssets);n&&n.forEach((t=>{t.notification=e.notification.message}))}else for(const r of t.values())r.forEach((t=>{t.notification=e.notification.message}))}}(e,r)));for(const e of r.values())e.forEach((e=>{e.notification&&t.push(e)}))}})),t}function addGeoNotificationsFromAttributePredicateCondition(e,t){e&&(e.items.forEach((e=>{!e.value||"radial"!==e.value.predicateType&&"rect"!==e.value.predicateType||t.push({predicate:e.value})})),e.groups&&e.groups.forEach((e=>addGeoNotificationsFromAttributePredicateCondition(e,t))))}const TIME_DURATION_REGEXP=/([+-])?((\d+)[Dd])?\s*((\d+)[Hh])?\s*((\d+)[Mm]$)?\s*((\d+)[Ss])?\s*((\d+)([Mm][Ss]$))?\s*((\d+)[Ww])?\s*((\d+)[Mm][Nn])?\s*((\d+)[Yy])?/;function isTimeDuration(e){return!!e&&(e=e.trim()).length>0&&(TIME_DURATION_REGEXP.test(e)||isTimeDurationPositiveInfinity(e)||isTimeDurationNegativeInfinity(e))}function isTimeDurationPositiveInfinity(e){return"*"===(e=null!=e?e.trim():void 0)||"+*"===e}function isTimeDurationNegativeInfinity(e){return"-*"===(null!=e?e.trim():void 0)}function isObject(e){return!!e&&"object"==typeof e}function isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)}function objectsEqual(e,t,r=!0){if(null==e||null==t)return e===t;if(e.constructor!==t.constructor)return!1;if(e instanceof Function)return e===t;if(e instanceof RegExp)return e===t;if(e===t||e.valueOf()===t.valueOf())return!0;if(Array.isArray(e)&&e.length!==t.length)return!1;if(e instanceof Date)return!1;if(!(e instanceof Object))return!1;if(!(t instanceof Object))return!1;if(r){const r=Object.keys(e);return Object.keys(t).every((e=>-1!==r.indexOf(e)))&&r.every((r=>objectsEqual(e[r],t[r])))}return!1}function arrayRemove(e,t){if(0===e.length)return;const r=e.indexOf(t);r>=0&&e.splice(r,1)}function sentenceCaseToCamelCase(e){return null==e?"":e.split(" ").map(((e,t)=>0===t?e[0].toLowerCase()+e.substring(1):e[0].toUpperCase()+e.substring(1))).join("")}function camelCaseToSentenceCase(e){if(null==e)return"";let t=!1;return e.split(/([A-Z]|\d)/).map(((e,r,n)=>{if(!e)return e;if(!t)return t=!0,e.charAt(0).toUpperCase()+e.slice(1);if("_"===e)return" ";if(1===e.length&&e===e.toUpperCase()){const t=!n[r-1]||"_"===n[r-1],o=r+1<n.length&&n[r+1]&&"_"!==n[r+1],i=r+3>n.length||!n[r+1]&&!n[r+3];t&&!o||(e=" "+e),(o||!t&&!i)&&(e=e.toLowerCase())}return e})).join("").trim()}function stringMatch(e,t){if(t===e)return!0;const r=e.endsWith("*"),n=!r&&e.startsWith("*"),o=!r&&!n&&e.startsWith("^")&&e.endsWith("$");if(r&&t.startsWith(e.substr(0,e.length-1)))return!0;if(n&&t.endsWith(e.substr(1)))return!0;if(o)try{return new RegExp(e).test(t)}catch(e){console.error("Failed to compile needle as a RegExp: "+e)}return!1}function capitaliseFirstLetter(e){if(e)return 1===e.length?e.toUpperCase():e.charAt(0).toUpperCase()+e.slice(1)}function enumContains(e,t){return e&&Object.values(e).includes(t)}function getEnumKeyAsString(e,t){return Object.keys(e).find((r=>e[r]===t))}function getWeekNumber(e){(e=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))).setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const t=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e.getTime()-t.getTime())/864e5+1)/7)}const monthNames=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];function formatCronString(e,t,r,n,o,i,a){let s="";if(i?Array.isArray(i)?s+=i.toString().replace(" ",""):s+=i.toString():s+="0",s+=" ",o?Array.isArray(o)?s+=o.toString().replace(" ",""):s+=o.toString():s+="0",s+=" ",n?Array.isArray(n)?s+=n.toString().replace(" ",""):s+=n.toString():s+="0",s+=" ",r?Array.isArray(r)?s+=r.toString().replace(" ",""):s+=r.toString():s+="*",s+=" ",t)if(Array.isArray(t))if("number"==typeof t[0]){const e=[];t.forEach((t=>{e.push(monthNames[t].toString())})),s+=e.toString().replace(" ","")}else s+=t.toString().replace(" ","");else s+=t.toString();else s+="*";return s+=" ",s+=a?a.toString():"?",s+=" ",e?Array.isArray(e)?s+=e.toString().replace(" ",""):s+=e:s+="*",s}function dateToCronString(e){return formatCronString(e.getFullYear(),monthNames[e.getMonth()],[e.getDate()],[e.getHours()],[e.getMinutes()])}function cronStringToISOString(e,t){const r=e.split(" ");if(!(Number.isNaN(Number(r[0]))||Number.isNaN(Number(r[1]))||Number.isNaN(Number(r[2]))||Number.isNaN(Number(r[3]))&&"*"!=r[3])){const e=(Number.isNaN(Number(r[6]))?(new Date).getFullYear():r[6]).toString();let n="";n="*"!=r[4]?monthNames.indexOf(r[4]).toString():(new Date).getMonth().toString(),n=1==n.length?"0"+n:n;const o=1==r[3].length&&"*"!=r[3]?"0"+r[3]:r[3].replace("*","01"),i=1==r[2].length&&"*"!=r[2]?"0"+r[2]:r[2].replace("*","00"),a=1==r[1].length&&"*"!=r[1]?"0"+r[1]:r[1].replace("*","00"),s=1==r[0].length&&"*"!=r[0]?"0"+r[0]:r[0].replace("*","00");if(e.length>0&&n.length>0)return t?moment_default().utc({year:Number(e),month:Number(n),date:Number(o),hour:Number(i),minute:Number(a),second:Number(s)}).toISOString():moment_default()({year:Number(e),month:Number(n),date:Number(o),hour:Number(i),minute:Number(a),second:Number(s)}).toISOString()}}function getMetaValue(e,t,r){const n="string"==typeof e?e:e.name;return t&&t.meta&&t.meta.hasOwnProperty(n)?t.meta[n]:r&&r.meta?r.meta[n]:void 0}function hasMetaItem(e,t,r){const n="string"==typeof e?e:e.name;return!!(t&&t.meta&&t.meta.hasOwnProperty(n))||!!(r&&r.meta&&r.meta.hasOwnProperty(n))}function getAssetTypeLabel(e){return"string"==typeof e&&(e=model_lib.u0.getAssetDescriptor(e)),e?i18next.Ay.t("label.asset."+e.name,{defaultValue:camelCaseToSentenceCase(e.name)}):""}function getValueDescriptorLabel(e){if(!e)return i18next.Ay.t("label.value.unknown",{defaultValue:"Unknown"});const t="string"==typeof e?e:e.name;return i18next.Ay.t("label.value."+t,{defaultValue:camelCaseToSentenceCase(t||"")})}function getAllowedValueLabel(e,t){if(e)return i18next.Ay.t("label.allowedValue."+e,{defaultValue:t||camelCaseToSentenceCase(e||""),nsSeparator:!1})}function getMetaItemNameValueHolder(e,t){const r="string"==typeof e?model_lib.u0.getMetaItemDescriptor(e):e;return r?{name:r.name,type:r.type,value:t}:{name:typeof e,type:model_lib.u0.resolveValueTypeFromValue(t),value:t}}function getAttributeLabel(e,t,r,n,o){return getValueHolderLabel(e,t,r,n,!0,o)}function getMetaLabel(e,t,r,n,o){return getValueHolderLabel(e||getMetaItemNameValueHolder(t,null),t,r,n,!1,o)}function getValueHolderLabel(e,t,r,n,o,i){let a=doStandardTranslationLookup("label",e,t,r,o),s="";if(a||(a=getMetaValue("label",e,t&&t.meta?t:void 0)),n&&(s=resolveUnits(getValueFormatConstraintOrUnits("units",e,t,r,o))),!a){const r=e?e.name:t?"string"==typeof t?t:t.name:void 0;a=i||(r?camelCaseToSentenceCase(r):void 0)}return a?a+(s?" ("+s+")":""):s}function getAttributeValueAsString(e,t,r,n,o){return getValueHolderValueAsString(e,t,r,n,!0,o)}function getMetaValueAsString(e,t,r,n,o){return getValueHolderValueAsString(e||getMetaItemNameValueHolder(t,null),t,r,n,!1,o)}function getValueHolderValueAsString(e,t,r,n,o,i){let a=getValueAsString(e?e.value:void 0,(()=>getValueFormatConstraintOrUnits("format",e,t,r,o)),void 0,i);const s=getAttributeUnits(e,t,r);return n&&s&&s.length&&(a=resolveUnits(getValueFormatConstraintOrUnits("units",e,t,r,o),a)),a}function getValueAsString(e,t,r,n){let o="";if(null==e)o=n||"";else if("string"==typeof e)o=e;else if("number"==typeof e||"boolean"==typeof e||e instanceof Date){const n=t&&t();if(n&&0!==Object.keys(n).length)switch("number"==typeof e?n.asBoolean?e=!!e:n.asDate&&(e=new Date(e)):"boolean"==typeof e&&n.asNumber&&(e=e?1:0),typeof e){case"number":o=new Intl.NumberFormat(r||i18next.Ay.language,n).format(e);break;case"boolean":n.asOnOff&&(o=e?i18next.Ay.t("on"):i18next.Ay.t("off")),n.asOpenClosed&&(o=e?i18next.Ay.t("open"):i18next.Ay.t("closed")),n.asPressedReleased&&(o=e?i18next.Ay.t("pressed"):i18next.Ay.t("released"));break;case"object":if(n.momentJsFormat)o=moment_default()(e).format(n.momentJsFormat);else if(n.iso8601)o=e.toISOString();else if(n.week){const t=getWeekNumber(e);o="2-digit"===n.week?String(t).padStart(2,"0"):Number(t).toString(10)}else o=new Intl.DateTimeFormat(r||i18next.Ay.language,n).format(e)}else o=Object(e).toString()}return o}function resolveUnits(e,t){if(!e)return"";t||(t="");const r=e.map(((e,r)=>{if(3!==e.length||e.toUpperCase()!==e)return i18next.Ay.t(["units."+e,"or:units."+e]);{const n=new Intl.NumberFormat(i18next.Ay.language,{currency:e,style:"currency"}).formatToParts();if(0!==r||"currency"!==n[0].type)return"currency"===n[0].type?n[0].value:n[n.length-1].value;if(!t)return n[0].value;t=n[0].value+t}})).join("");return t.length>0?t+" "+r:r}function getAttributeValueConstraints(e,t,r){return getValueFormatConstraintOrUnits("constraints",e,t,r,!0)}function getMetaValueConstraints(e,t,r){return getValueFormatConstraintOrUnits("constraints",e||getMetaItemNameValueHolder(t,null),t,r,!1)}function getAttributeUnits(e,t,r){return getValueFormatConstraintOrUnits("units",e,t,r,!0)}function getMetaUnits(e,t,r){return getValueFormatConstraintOrUnits("units",e||getMetaItemNameValueHolder(t,null),t,r,!1)}function getAttributeValueFormat(e,t,r){return getValueFormatConstraintOrUnits("format",e,t,r,!0)}function getMetaValueFormat(e,t,r){return getValueFormatConstraintOrUnits("format",e||getMetaItemNameValueHolder(t,null),t,r,!1)}function mergeObjects(e,t,r){if(e&&!t)return Object.assign({},e);if(t&&!e)return Object.assign({},t);const n=Object.assign({},e),o=[];return Object.entries(t).forEach((([e,t])=>{!function mergeObjectKey(e,t,r,n,o){let i=e;t.forEach((e=>{i.hasOwnProperty(e)||(i[e]={}),i=i[e]})),i&&(i.hasOwnProperty(r)?null==n?delete i[r]:Array.isArray(i[r])?i[r]=o?[...i[r],...n]:[...n]:i[r]="object"==typeof n?mergeObjects(Object.assign({},i[r]),n,o):n:null==n?delete i[r]:Array.isArray(n)?i[r]=[...n]:i[r]="object"==typeof n?Object.assign({},n):n)}(n,o,e,t,r)})),n}function getValueFormatConstraintOrUnits(e,t,r,n,o){let i;const a=[],s=doStandardTranslationLookup(e,t&&"string"==typeof t?t:t?t.name:r?"string"==typeof r?r:r.name:void 0,r,n,o);if(s&&(i=JSON.parse(s),i)){if("format"!==e)return i;a.push(i)}if(t&&t.meta&&(i=getMetaValue(e,t,r),i)){if("format"!==e)return i;a.push(i)}if(r&&"string"!=typeof r&&r.hasOwnProperty(e)){if(i=r[e],"format"!==e)return i;a.push(i)}if(r&&r.type){if(i=model_lib.u0.getValueDescriptor(r.type)[e],"format"!==e)return i;a.push(i)}if("format"!==e||0===a.length)return i;let u={};return a.reverse().forEach((e=>{u=Object.assign(Object.assign({},u),e)})),u}function doStandardTranslationLookup(e,t,r,n,o,i){let a;if(t?a="string"==typeof t?t:t.name:r&&(a="string"==typeof r?r:r.name),!a)return;const s=[],u=e+"."+(o?"attribute":"meta")+".";return n&&s.push(u+n+"."+a),r&&"string"!=typeof r&&(s.push(u+r.type+"."+a),s.push(u+r.type)),s.push(u+a),s.length>0?i18next.Ay.t(s,{defaultValue:i||""}):void 0}function updateAsset(e,t){const r=t.ref.name;if(e.attributes)if(t.deleted)delete e.attributes[r];else{const n=e.attributes[r];n&&(n.value=t.value,n.timestamp=t.timestamp)}return Object.assign({},e)}function loadJs(e){return new Promise(((t,r)=>{const n=document.createElement("script");n.type="text/javascript",n.src=e,n.addEventListener("load",(e=>t(e)),!1),n.addEventListener("error",(e=>r(e)),!1),document.body.appendChild(n)}))}function sortByNumber(e){return(t,r)=>{const n=e(t),o=e(r);return n||o?n&&!o?1:!n&&o?-1:n-o:0}}function sortByString(e){return(t,r)=>{const n=e(t),o=e(r);return n||o?n&&!o?1:!n&&o?-1:n.localeCompare(o):0}}function dispatchCancellableEvent(e,t){const r=new Deferred;return e.dispatchEvent(t),window.setTimeout((()=>{r.resolve(t.detail)})),r.promise}const keys={37:1,38:1,39:1,40:1};function preventDefault(e){e.preventDefault()}function preventDefaultForScrollKeys(e){if(keys[e.keyCode])return preventDefault(e),!1}let supportsPassive=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>{supportsPassive=!0}}))}catch(e){}const wheelOpt=!!supportsPassive&&{passive:!1},wheelEvent="onwheel"in document.createElement("div")?"wheel":"mousewheel";function disableScroll(){window.addEventListener("DOMMouseScroll",preventDefault,!1),window.addEventListener(wheelEvent,preventDefault,wheelOpt),window.addEventListener("touchmove",preventDefault,wheelOpt),window.addEventListener("keydown",preventDefaultForScrollKeys,!1)}function enableScroll(){window.removeEventListener("DOMMouseScroll",preventDefault,!1),window.removeEventListener(wheelEvent,preventDefault,wheelOpt),window.removeEventListener("touchmove",preventDefault,wheelOpt),window.removeEventListener("keydown",preventDefaultForScrollKeys,!1)}function blobToBase64(e){return new Promise(((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>{t(n.result)},n.onerror=e=>{r(e)}}))}function realmRoleFilter(e){return"admin"===e.name||!e.composite&&!["uma_authorization","offline_access","create-realm"].includes(e.name)&&!e.name.startsWith("default-roles")}var __awaiter=function(e,i,r,s){return new(r||(r=Promise))((function(t,o){function n(e){try{d(s.next(e))}catch(e){o(e)}}function a(e){try{d(s.throw(e))}catch(e){o(e)}}function d(e){var i;e.done?t(e.value):(i=e.value,i instanceof r?i:new r((function(e){e(i)}))).then(n,a)}d((s=s.apply(e,i||[])).next())}))};let platform=__webpack_require__("../../../node_modules/platform/platform.js");class Console{constructor(e,i,r){this._autoEnable=!1,this._initialised=!1,this._initialiseInProgress=!1,this._pendingProviderPromises={},this._providerMessageListeners={},this._pendingProviderEnables=[],this._registrationTimer=null,this._realm=e,this._autoEnable=i,this._enableCompleteCallback=r,window.OpenRemoteConsole=this;let s=new URLSearchParams(window.location.search),t=s.get("consoleName"),o=s.get("consoleVersion"),n=s.get("consolePlatform"),a=s.get("consoleProviders"),d=s.get("consoleAutoEnable"),l=a&&a.length>0?a.split(" "):["push","storage"];l.indexOf("storage")<0&&l.push("storage"),this._pendingProviderEnables=l;let g=Console._createConsoleRegistration(),h=window.localStorage.getItem("OpenRemoteConsole:"+e);if(h)try{let e=JSON.parse(h);e.id&&(g.id=e.id),e.name&&(g.name=e.name),e.providers&&(g.providers=e.providers),e.apps&&(g.apps=e.apps)}catch(e){console.error("Failed to deserialise console registration")}let p=g.providers;g.providers={};for(let e of l){let i=p&&p.hasOwnProperty(e)?p[e]:{enabled:!1,disabled:!1};g.providers[e]=i}let v=core_lib.getAppName();v.length>0&&g.apps.indexOf(v)<0&&g.apps.push(v),this._registration=g,t&&(g.name=t),o&&(g.version=o),n&&(g.platform=n),d&&(this._autoEnable="TRUE"===d||"true"===d)}get registration(){return this._registration}get autoEnable(){return this._autoEnable}get pendingProviderEnables(){return this._pendingProviderEnables.slice(0)}get shellApple(){const e=navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform:navigator.platform;return e&&("iP"===e.substring(0,2)||"Mac"===e.substring(0,3))&&window.webkit&&window.webkit.messageHandlers}get shellAndroid(){return!!window.MobileInterface}get isMobile(){return this.shellApple||this.shellAndroid}initialise(){return __awaiter(this,void 0,void 0,(function*(){if(!this._initialised&&!this._initialiseInProgress){console.debug("Console: initialising"),this._initialiseInProgress=!0;try{if(this._registration.providers)for(let e of Object.keys(this._registration.providers))yield this._initialiseProvider(e);this._registration.id||(yield this.sendRegistration(0)),this._initialised=!0,this._initialiseInProgress=!1,0===this._pendingProviderEnables.length?(yield this.sendRegistration(),this._callCompletedCallback()):this._autoEnable&&(yield this.enableProviders())}catch(e){console.error(e)}finally{this._initialiseInProgress=!1}}}))}enableProviders(){return __awaiter(this,void 0,void 0,(function*(){if(!this._initialised)throw new Error("Console must be initialised before enabling providers");for(let e=this._pendingProviderEnables.length-1;e>-1;e--){let i=this._pendingProviderEnables[e];yield this.enableProvider(i)}}))}enableProvider(e,i){return __awaiter(this,void 0,void 0,(function*(){if(!this._initialised)throw console.debug("Console must be initialised before disabling providers"),new Error("Console must be initialised before enabling providers");if(!this._registration.providers.hasOwnProperty(e))throw console.debug("Invalid console provider '"+e+"'"),new Error("Invalid console provider '"+e+"'");console.debug("Console: enabling provider '"+e+"'");let r={provider:e,action:"PROVIDER_ENABLE",consoleId:this._registration.id,data:i},s=yield this.sendProviderMessage(r,!0);this._registration.providers[e].hasPermission=s.hasPermission,this._registration.providers[e].success=s.success,this._registration.providers[e].enabled=s.success,this._registration.providers[e].data=s.data;let t=this._pendingProviderEnables.indexOf(e);return t>=0&&(this._pendingProviderEnables.splice(t,1),0===this._pendingProviderEnables.length&&(this.sendRegistration(),this._callCompletedCallback())),s}))}disableProvider(e){return __awaiter(this,void 0,void 0,(function*(){if(!this._initialised)throw console.debug("Console must be initialised before disabling providers"),new Error("Console must be initialised before disabling providers");if(!this._registration.providers.hasOwnProperty(e))throw console.debug("Invalid console provider '"+e+"'"),new Error("Invalid console provider '"+e+"'");console.debug("Console: disabling provider '"+e+"'");let i=yield this.sendProviderMessage({provider:e,action:"PROVIDER_DISABLE"},!0);return this._registration.providers[e].disabled=!0,this._registration.providers[e].enabled=!1,i}))}getProvider(e){return this._registration&&this._registration.providers?this._registration.providers[e]:void 0}sendProviderMessage(e,i){return __awaiter(this,void 0,void 0,(function*(){if(!this._registration.providers.hasOwnProperty(e.provider))throw console.debug("Invalid console provider '"+e.provider+"'"),new Error("Invalid console provider '"+e.provider+"'");if(!i)return void this._doSendProviderMessage(e);let r=e.provider+e.action;if(this._pendingProviderPromises[r])throw new Error("Message already pending for provider '"+e.provider+"' with action '"+e.action+"'");const s=new Deferred;return this._pendingProviderPromises[r]=[s,window.setTimeout((()=>{delete this._pendingProviderPromises[r],s.reject("No response from provider")}),5e3)],this._doSendProviderMessage(e),s.promise}))}sendRegistration(e){return this._registrationTimer&&(window.clearTimeout(this._registrationTimer),this._registrationTimer=null),e=void 0!==e?e:2e3,console.debug("Sending registration in: "+e+"ms"),new Promise(((e,i)=>{this._registrationTimer=window.setTimeout((()=>{this._registrationTimer=null,console.debug("Console: updating registration");try{this._registration.name||(this._registration.name="Console"),this._registration.platform||(this._registration.platform="N/A"),this._registration.version||(this._registration.version="N/A"),this._registration.providers||(this._registration.providers={}),core_lib.rest.api.ConsoleResource.register(this._registration).then((i=>{if(200!==i.status)throw new Error("Failed to register console");this._registration=i.data,console.debug("Console: registration successful"),console.debug("Console: updating locally stored registration"),window.localStorage.setItem("OpenRemoteConsole:"+this._realm,JSON.stringify(this._registration)),e()}))}catch(e){console.error("Failed to register console"),i("Failed to register console")}}))}))}storeData(e,i){this.sendProviderMessage({provider:"storage",action:"STORE",key:e,value:i},!1)}retrieveData(e){return __awaiter(this,void 0,void 0,(function*(){let i=yield this.sendProviderMessage({provider:"storage",action:"RETRIEVE",key:e},!0);if(i&&i.value)return i.value}))}addProviderMessageListener(e,i){this._providerMessageListeners[e.provider+e.action]=i}removeProviderMessageListener(e){delete this._providerMessageListeners[e.provider+e.action]}_postNativeShellMessage(e){try{if(this.shellAndroid)return window.MobileInterface.postMessage(JSON.stringify(e));if(this.shellApple)return window.webkit.messageHandlers.int.postMessage(e)}catch(e){console.error("Failed to send shell message towards console",e)}}_doSendGenericMessage(e,i){const r={type:e,data:i};this.isMobile?this._postNativeShellMessage(r):console.warn("Failed to send generic message to console.",r)}_doSendProviderMessage(e){if(this.isMobile)this._postNativeShellMessage({type:"provider",data:e});else{if(!e.provider||!e.action)return;switch(e.provider.trim().toUpperCase()){case"PUSH":switch(e.action.trim().toUpperCase()){case"PROVIDER_INIT":let i={action:"PROVIDER_INIT",provider:"push",version:"web",enabled:!0,disabled:!1,hasPermission:!0,requiresPermission:!1,success:!0};this._handleProviderResponse(JSON.stringify(i));break;case"PROVIDER_ENABLE":let r={action:"PROVIDER_ENABLE",provider:"push",hasPermission:!0,success:!0};this._handleProviderResponse(JSON.stringify(r));break;default:throw new Error("Unsupported provider '"+e.provider+"' and action '"+e.action+"'")}break;case"STORAGE":switch(e.action){case"PROVIDER_INIT":let i={action:"PROVIDER_INIT",provider:"storage",version:"1.0.0",disabled:!1,enabled:!0,hasPermission:!0,requiresPermission:!1,success:!0};this._handleProviderResponse(JSON.stringify(i));break;case"PROVIDER_ENABLE":let r={action:"PROVIDER_ENABLE",provider:"storage",hasPermission:!0,success:!0};this._handleProviderResponse(JSON.stringify(r));break;case"STORE":{let i=e.key?e.key.trim():null;if(!i||0===i.length)throw new Error("Storage provider 'store' action requires a `key`");null===e.value?window.localStorage.removeItem(i):window.localStorage.setItem(i,JSON.stringify(e.value))}break;case"RETRIEVE":{let i=e.key?e.key.trim():null;if(!i||0===i.length)throw new Error("Storage provider 'retrieve' action requires a `key`");let r=window.localStorage.getItem(i);if(null!==r)try{r=JSON.parse(r)}catch(e){}this._handleProviderResponse(JSON.stringify({action:"RETRIEVE",provider:"storage",key:i,value:r}))}break;default:throw new Error("Unsupported provider '"+e.provider+"' and action '"+e.action+"'")}break;default:console.error("Unsupported provider: "+e.provider)}}}_handleProviderResponse(e){if(!e)return;let i=JSON.parse(e),r=i.provider,s=i.action,t=this._pendingProviderPromises[r+s];t&&(window.clearTimeout(t[1]),delete this._pendingProviderPromises[r+s],t[0].resolve(i));let o=this._providerMessageListeners[r+s];o&&o(i)}_callCompletedCallback(){let e=this._enableCompleteCallback;this._enableCompleteCallback=null,e&&window.setTimeout((()=>{e()}),0)}static _createConsoleRegistration(){return{name:platform.name,version:platform.version,platform:platform.os.toString(),apps:[],model:((platform.manufacturer?platform.manufacturer+" ":"")+(platform.product?platform.product:"")).trim()}}_initialiseProvider(e){return __awaiter(this,void 0,void 0,(function*(){let i;console.debug("Console: initialising provider '"+e+"'");try{i=yield this.sendProviderMessage({provider:e,action:"PROVIDER_INIT"},!0),this._registration.providers[e].version=i.version,this._registration.providers[e].requiresPermission=i.requiresPermission,this._registration.providers[e].hasPermission=i.hasPermission,this._registration.providers[e].success=i.success,this._registration.providers[e].enabled=i.enabled,this._registration.providers[e].disabled=i.disabled,this._registration.providers[e].data=i.data}catch(e){console.error(e),i={action:"",disabled:!1,enabled:!1,hasPermission:!1,provider:"",requiresPermission:!1,version:"",success:!1}}if(i.success||(console.debug("Provider initialisation failed: '"+e+"'"),i.disabled=!0,this._registration.providers[e].disabled=!0),i.disabled||i.enabled){let i=this._pendingProviderEnables.indexOf(e);i>=0&&this._pendingProviderEnables.splice(i,1)}}))}}var EventProviderStatus,e,rest_lib=__webpack_require__("../../component/rest/lib/index.js"),event_awaiter=function(e,t,s,i){return new(s||(s=Promise))((function(n,r){function o(e){try{a(i.next(e))}catch(e){r(e)}}function c(e){try{a(i.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,c)}a((i=i.apply(e,t||[])).next())}))};(e=EventProviderStatus||(EventProviderStatus={})).DISCONNECTED="DISCONNECTED",e.CONNECTED="CONNECTED",e.CONNECTING="CONNECTING",e.RECONNECT_FAILED="RECONNECT_FAILED";class EventProviderImpl{constructor(){this._disconnectRequested=!1,this._reconnectDelayMillis=WebSocketEventProvider.MIN_RECONNECT_DELAY,this._reconnectTimer=null,this._status=EventProviderStatus.DISCONNECTED,this._connectingDeferred=null,this._statusCallbacks=[],this._pendingSubscription=null,this._queuedSubscriptions=[],this._subscriptionMap=new Map,this._assetEventCallbackMap=new Map,this._attributeEventCallbackMap=new Map,this._unloading=!1}get status(){return this._status}subscribeStatusChange(e){this._statusCallbacks.push(e)}unsubscribeStatusChange(e){arrayRemove(this._statusCallbacks,e)}connect(){return this._status===EventProviderStatus.CONNECTED?Promise.resolve(!0):(this._disconnectRequested=!1,this._connectingDeferred||(this._onStatusChanged(EventProviderStatus.CONNECTING),this._connectingDeferred=new Deferred,this._doConnect().then((e=>{if(this._connectingDeferred){const t=this._connectingDeferred;this._connectingDeferred=null,this._reconnectTimer&&(window.clearTimeout(this._reconnectTimer),this._reconnectTimer=null),e?(console.debug("Connected to event service: "+this.endpointUrl),this._reconnectDelayMillis=WebSocketEventProvider.MIN_RECONNECT_DELAY,this._onStatusChanged(EventProviderStatus.CONNECTED),window.setTimeout((()=>{this._onConnect()}),0)):(console.debug("Failed to connect to event service: "+this.endpointUrl),this._onStatusChanged(EventProviderStatus.DISCONNECTED)),t.resolve(e)}}))),this._connectingDeferred.promise)}disconnect(){console.debug("Disconnecting from event service: "+this.endpointUrl),this._disconnectRequested||(this._disconnectRequested=!0,this._reconnectTimer&&(window.clearTimeout(this._reconnectTimer),this._reconnectTimer=null),this.status!==EventProviderStatus.DISCONNECTED&&this._doDisconnect())}subscribe(e,t){const s={eventSubscription:e,callback:t,deferred:new Deferred};return null!=this._pendingSubscription||this._status!==EventProviderStatus.CONNECTED?(this._queuedSubscriptions.push(s),s.deferred.promise):(this._pendingSubscription=s,this._doSubscribe(e).then((e=>{if(this._pendingSubscription){const t=this._pendingSubscription;this._pendingSubscription=null,this._subscriptionMap.set(e,t),this._processNextSubscription();const s=t.deferred;t.deferred=null,s&&s.resolve(e)}}),(e=>{if(this._pendingSubscription){const t=this._pendingSubscription;this._pendingSubscription=null,this._processNextSubscription();const s=t.deferred;t.deferred=null,s&&s.reject(e)}})),this._pendingSubscription.deferred.promise)}unsubscribe(e){return event_awaiter(this,void 0,void 0,(function*(){if(this._subscriptionMap.delete(e))this._doUnsubscribe(e);else if(this._assetEventCallbackMap.delete(e)){if(this._assetEventPromise&&0===this._assetEventCallbackMap.size){const e=yield this._assetEventPromise;this._assetEventPromise=void 0,this.unsubscribe(e)}}else if(this._attributeEventCallbackMap.delete(e)&&this._attributeEventPromise&&0===this._attributeEventCallbackMap.size){const e=yield this._attributeEventPromise;this._attributeEventPromise=void 0,this.unsubscribe(e)}}))}sendEvent(e){this._status===EventProviderStatus.CONNECTED&&this._doSend(e)}sendEventWithReply(e){return this._status!==EventProviderStatus.CONNECTED?Promise.reject("Not connected"):this._doSendWithReply(e)}subscribeAssetEvents(e,t,s){return event_awaiter(this,void 0,void 0,(function*(){const i=e&&"string"!=typeof e[0]?e.map((e=>e.id)):e,n="AssetEvent"+EventProviderImpl._subscriptionCounter++;if(!this._assetEventPromise){let e;core_lib.authenticated||(e={filterType:"asset",realm:core_lib.displayRealm});const t={eventType:"asset",filter:e};this._assetEventPromise=this.subscribe(t,(e=>{this._assetEventCallbackMap.forEach((t=>t(e)))}))}return this._assetEventCallbackMap.set(n,(e=>{const t=e.asset.id;i?i.find((e=>t===e))&&s(e):e.asset.realm===core_lib.displayRealm&&s(e)})),this._assetEventPromise.then((()=>{try{if(i&&t){const e={messageId:"read-assets:"+i.join(",")+":"+n,event:{eventType:"read-assets",assetQuery:{ids:i}}};this.sendEventWithReply(e).then((e=>{const t=e;t.assets&&this._assetEventCallbackMap.has(n)&&t.assets.forEach((e=>{s({eventType:"asset",asset:e,cause:"READ"})}))}))}}catch(t){throw console.error("Failed to subscribe to asset events for assets: "+e),n&&this.unsubscribe(n),t}return n}))}))}subscribeAttributeEvents(e,t,s){return event_awaiter(this,void 0,void 0,(function*(){const i=e&&"string"!=typeof e[0],n=i?e.map((e=>e.id)):e,r=i?e:void 0,o="AttributeEvent"+EventProviderImpl._subscriptionCounter++;if(!this._attributeEventPromise){let e;core_lib.authenticated||(e={filterType:"asset",realm:core_lib.displayRealm});const t={eventType:"attribute",filter:e};this._attributeEventPromise=this.subscribe(t,(e=>{this._attributeEventCallbackMap.forEach((t=>t(e)))}))}const c=t=>{const r=t.ref;i?e.forEach((e=>{r.id===e.id&&r.name===e.name&&s(t)})):n?n.find((e=>r.id===e))&&s(t):t.realm===core_lib.displayRealm&&s(t)};return this._attributeEventCallbackMap.set(o,c),this._attributeEventPromise.then((()=>{try{if(t&&n){const e={messageId:"read-assets:"+n.join(",")+":"+o,event:{eventType:"read-assets",assetQuery:{ids:n}}};this.sendEventWithReply(e).then((e=>{const t=e;t.assets&&this._attributeEventCallbackMap.has(o)&&t.assets.forEach((e=>{e.attributes&&Object.entries(e.attributes).forEach((([t,s])=>{r&&!r.find((s=>s.id===e.id&&s.name===t))||c({eventType:"attribute",timestamp:s.timestamp,value:s.value,ref:{id:e.id,name:t}})}))}))}))}}catch(t){throw console.error("Failed to subscribe to asset events for assets: "+e),o&&this.unsubscribe(o),t}return o}))}))}_processNextSubscription(){this._status===EventProviderStatus.CONNECTED&&0!==this._queuedSubscriptions.length&&setTimeout((()=>{const e=this._queuedSubscriptions.shift();e&&this.subscribe(e.eventSubscription,e.callback).then((t=>{const s=e.deferred;e.deferred=null,s&&s.resolve(t)}),(t=>{const s=e.deferred;e.deferred=null,s&&s.reject(t)}))}),0)}_onStatusChanged(e){e!==this._status&&(console.debug("Event provider status changed: "+e),this._status=e,this._unloading||window.setTimeout((()=>{this._statusCallbacks.forEach((t=>t(e)))}),0))}_onMessageReceived(e,t){const s=this._subscriptionMap.get(e);s&&s.callback(t)}_onConnect(){if(Object.keys(this._subscriptionMap).length>0){for(const e in this._subscriptionMap)this._subscriptionMap.has(e)&&this._queuedSubscriptions.unshift(this._subscriptionMap.get(e));this._subscriptionMap.clear()}this._processNextSubscription()}_onDisconnect(){this._onStatusChanged(EventProviderStatus.DISCONNECTED),this._pendingSubscription&&(this._queuedSubscriptions.unshift(this._pendingSubscription),this._pendingSubscription=null),this._scheduleReconnect()}_scheduleReconnect(){this._reconnectTimer||this._disconnectRequested||(console.debug("Event provider scheduling reconnect in "+this._reconnectDelayMillis+"ms"),this._reconnectTimer=window.setTimeout((()=>{this._disconnectRequested||this.connect().then((e=>{e||(this._onStatusChanged(EventProviderStatus.RECONNECT_FAILED),this._scheduleReconnect())})).catch((e=>{this._onStatusChanged(EventProviderStatus.RECONNECT_FAILED),this._scheduleReconnect()}))}),this._reconnectDelayMillis),this._reconnectDelayMillis<WebSocketEventProvider.MAX_RECONNECT_DELAY&&(this._reconnectDelayMillis=Math.min(WebSocketEventProvider.MAX_RECONNECT_DELAY,this._reconnectDelayMillis+3e3)))}}EventProviderImpl.MIN_RECONNECT_DELAY=0,EventProviderImpl.MAX_RECONNECT_DELAY=3e4,EventProviderImpl._subscriptionCounter=0;class WebSocketEventProvider extends EventProviderImpl{get endpointUrl(){return this._endpointUrl}constructor(e){super(),this._webSocket=void 0,this._connectDeferred=null,this._subscribeDeferred=null,this._repliesDeferred=new Map,this._endpointUrl=(e.startsWith("https:")?"wss":"ws")+"://"+e.substr(e.indexOf("://")+3)+"/websocket/events",window.addEventListener("beforeunload",(()=>{this._unloading=!0,this.disconnect()}))}_doConnect(){let e=this._endpointUrl+"?Realm="+core_lib.config.realm;return core_lib.authenticated&&(e+="&Authorization="+core_lib.getAuthorizationHeader()),this._webSocket=new WebSocket(e),this._connectDeferred=new Deferred,core_lib.isTokenExpired()&&this._connectDeferred.resolve(!1),this._webSocket.onopen=()=>{if(this._connectDeferred){const e=this._connectDeferred;this._connectDeferred=null,e.resolve(!0)}},this._webSocket.onerror=e=>{if(this._connectDeferred){const e=this._connectDeferred;this._connectDeferred=null,e.resolve(!1)}else console.debug("Event provider error"),this._beforeDisconnect()},this._webSocket.onclose=()=>{if(this._webSocket=void 0,this._connectDeferred){const e=this._connectDeferred;this._connectDeferred=null,e.resolve(!1)}else this._beforeDisconnect()},this._webSocket.onmessage=e=>{const t=e.data;if(t&&t.startsWith("SUBSCRIBED:")){const e=t.substring(11),s=JSON.parse(e),i=this._subscribeDeferred;this._subscribeDeferred=null,i&&i.resolve(s.subscriptionId)}else if(t.startsWith("UNAUTHORIZED:")){const e=t.substring(13),s=JSON.parse(e),i=this._subscribeDeferred;this._subscribeDeferred=null,i&&(console.warn("Unauthorized event subscription: "+JSON.stringify(s,null,2)),i.reject("Unauthorized"))}else if(t.startsWith("TRIGGERED:")){const e=t.substring(10),s=JSON.parse(e);s.events&&s.events.forEach((e=>{this._onMessageReceived(s.subscriptionId,e)}))}else if(t.startsWith("REQUESTRESPONSE:")){const e=t.substring(16),s=JSON.parse(e);if(s.messageId&&s.event){const e=this._repliesDeferred.get(s.messageId);this._repliesDeferred.delete(s.messageId),e&&e.resolve(s.event)}}},this._connectDeferred.promise}_beforeDisconnect(){this._onDisconnect()}_doDisconnect(){var e;null===(e=this._webSocket)||void 0===e||e.close(),this._subscribeDeferred=null,this._repliesDeferred.clear()}_doSubscribe(e){return this._webSocket?this._subscribeDeferred?Promise.reject("There's already a pending subscription"):(this._subscribeDeferred=new Deferred,e.subscriptionId||(e.subscriptionId=WebSocketEventProvider._subscriptionCounter+++""),this._webSocket.send("SUBSCRIBE:"+JSON.stringify(e)),this._subscribeDeferred.promise):Promise.reject("Not connected")}_doUnsubscribe(e){if(!this._webSocket)return;const t={subscriptionId:e};this._webSocket.send("UNSUBSCRIBE:"+JSON.stringify(t))}_doSend(e){const t="EVENT:"+JSON.stringify(e);this._webSocket.send(t)}_doSendWithReply(e){if(e.messageId||(e.messageId=((new Date).getTime()+10*Math.random()).toString(10)),this._repliesDeferred.has(e.messageId))return Promise.reject("There's already a pending send and reply with this ID");const t=new Deferred;return this._repliesDeferred.set(e.messageId,t),this._webSocket.send("REQUESTRESPONSE:"+JSON.stringify(e)),t.promise}}WebSocketEventProvider._subscriptionCounter=1;var esm=__webpack_require__("../../../node_modules/i18next-http-backend/esm/index.js"),or_icon_lib=__webpack_require__("../../component/or-icon/lib/index.js"),keycloak=__webpack_require__("../../../node_modules/keycloak-js/dist/keycloak.mjs"),asset_mixin_awaiter=function(t,e,s,n){return new(s||(s=Promise))((function(i,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function c(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,c)}u((n=n.apply(t,e||[])).next())}))};const subscribe=t=>e=>class extends e{constructor(){super(...arguments),this._connectRequested=!1,this._status=EventProviderStatus.DISCONNECTED,this._statusCallback=t=>this._onEventProviderStatusChanged(t)}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this.connectEvents()}disconnectedCallback(){this.disconnectEvents(),super.disconnectedCallback&&super.disconnectedCallback()}connectEvents(){t.getEventProvider()?this._connectRequested||(this._connectRequested=!0,t.getEventProvider().subscribeStatusChange(this._statusCallback),this._doConnect()):console.log("No event provider available so cannot subscribe")}disconnectEvents(){this._connectRequested&&(this._connectRequested=!1,t.getEventProvider().unsubscribeStatusChange(this._statusCallback),this._onEventsDisconnect())}_doConnect(){return asset_mixin_awaiter(this,void 0,void 0,(function*(){this.eventsConnected&&this._onEventsConnect()}))}get eventsConnected(){return this._connectRequested&&t.getEventProvider().status===EventProviderStatus.CONNECTED}_onEventProviderStatusChanged(t){switch(t){case EventProviderStatus.DISCONNECTED:this._onEventsDisconnect();break;case EventProviderStatus.CONNECTED:this._doConnect()}}_onEventsConnect(){this._addEventSubscriptions(),this.onEventsConnect()}_onEventsDisconnect(){this._removeEventSubscriptions(),this.onEventsDisconnect()}_addEventSubscriptions(){return asset_mixin_awaiter(this,void 0,void 0,(function*(){const e=!!this._attributeRefs,s=!!this._assetIds,n=this._attributeRefs?this._attributeRefs:this._assetIds;if(n&&n.length>0){if(this._subscriptionIds=[],s){const e=yield t.getEventProvider().subscribeAssetEvents(n,!0,(t=>this._onEvent(t))),s=this._attributeRefs?this._attributeRefs:this._assetIds;if(!this._subscriptionIds||!objectsEqual(n,s))return void t.getEventProvider().unsubscribe(e);this._subscriptionIds.push(e)}const i=yield t.getEventProvider().subscribeAttributeEvents(n,e,(t=>this._onEvent(t))),r=this._attributeRefs?this._attributeRefs:this._assetIds;if(!this._subscriptionIds||!objectsEqual(n,r))return void t.getEventProvider().unsubscribe(i);this._subscriptionIds.push(i)}}))}_removeEventSubscriptions(){this._subscriptionIds&&(this._subscriptionIds.forEach((e=>{t.getEventProvider().unsubscribe(e)})),this._subscriptionIds=void 0)}_refreshEventSubscriptions(){this._removeEventSubscriptions(),this._addEventSubscriptions()}set assetIds(t){objectsEqual(this._assetIds,t)||(this._assetIds=t,this._refreshEventSubscriptions(),this.requestUpdate("assetIds"))}get assetIds(){return this._assetIds}set attributeRefs(t){objectsEqual(this._attributeRefs,t)||(this._attributeRefs=t,this._refreshEventSubscriptions())}get attributeRefs(){return this._attributeRefs}_sendEvent(e){t.getEventProvider().sendEvent(e)}_sendEventWithReply(e){return t.getEventProvider().sendEventWithReply(e)}onEventsConnect(){}onEventsDisconnect(){}_onEvent(t){}},DefaultColor4="#4d9d2a",DefaultColor1="#FFFFFF",DefaultColor2="#F9F9F9",DefaultColor5="#CCCCCC",DefaultColor6="#be0000",DefaultColor8="#FFFFFF",DefaultColor3="#4c4c4c",DefaultBoxShadowBottom="0 5px 5px -5px rgba(0,0,0,0.3)",DefaultBoxShadow="0 1px 3px 0 rgba(0,0,0,0.21)",DefaultHeaderHeight="50px";var lib_awaiter=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}c((n=n.apply(e,t||[])).next())}))};var ORError,OREvent;!function(e){e.MANAGER_FAILED_TO_LOAD="MANAGER_FAILED_TO_LOAD",e.AUTH_FAILED="AUTH_FAILED",e.AUTH_TYPE_UNSUPPORTED="AUTH_TYPE_UNSUPPORTED",e.CONSOLE_ERROR="CONSOLE_INIT_ERROR",e.EVENTS_CONNECTION_ERROR="EVENTS_CONNECTION_ERROR",e.TRANSLATION_ERROR="TRANSLATION_ERROR"}(ORError||(ORError={})),function(e){e.ERROR="ERROR",e.READY="READY",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e.CONNECTING="CONNECTING",e.RECONNECT_FAILED="RECONNECT_FAILED",e.CONSOLE_INIT="CONSOLE_INIT",e.CONSOLE_READY="CONSOLE_READY",e.CONSOLE_VISIBLE="CONSOLE_VISIBLE",e.CONSOLE_HIDDEN="CONSOLE_HIDDEN",e.TRANSLATE_INIT="TRANSLATE_INIT",e.TRANSLATE_LANGUAGE_CHANGED="TRANSLATE_LANGUAGE_CHANGED",e.DISPLAY_REALM_CHANGED="DISPLAY_REALM_CHANGED"}(OREvent||(OREvent={}));const DEFAULT_LANGUAGES={en:"english",cn:"chinese",nl:"dutch",fr:"french",de:"german",it:"italian",pt:"portuguese",ro:"romanian",es:"spanish",uk:"ukrainian"};const manager=new class Manager{constructor(){this._authenticated=!1,this._authDisconnected=!1,this._ready=!1,this._name="",this._username="",this._keycloakUpdateTokenInterval=void 0,this._managerVersion="",this._authServerUrl="",this._listeners=[],this._eventsDisconnected=!1}get username(){return this._username}get error(){return this._error}get authenticated(){return this._authenticated}get ready(){return this._ready}get config(){return this._config}get roles(){const e=new Map;return this._keycloak?this._keycloak.resourceAccess&&this._config.clientId&&this._keycloak.resourceAccess&&Object.entries(this._keycloak.resourceAccess).forEach((([t,i])=>{const n=i.roles;e.set(t,n)})):this._basicIdentity&&this._basicIdentity.roles&&e.set(this._config.clientId,this._basicIdentity.roles.map((e=>e.name))),e}get managerVersion(){return this._managerVersion}get isManagerAvailable(){return this._managerVersion&&""!==this._managerVersion}get managerUrl(){return this._config.managerUrl}get keycloakUrl(){return this._config.keycloakUrl}get isError(){return!!this._error}get connectionStatus(){return this._events&&this._events.status}get console(){return this._console}get consoleAppConfig(){return this._consoleAppConfig}get events(){return this._events}get rest(){return rest_lib.Ay}get language(){return i18next.Ay.language}set language(e){e&&(i18next.Ay.changeLanguage(e),this.console.storeData("LANGUAGE",e))}get displayRealm(){return this._displayRealm||this._config.realm}set displayRealm(e){this.isSuperUser()&&this._displayRealm!==e&&(this._displayRealm=e,this._emitEvent(OREvent.DISPLAY_REALM_CHANGED))}getEventProvider(){return this.events}get mapType(){return this._config.mapType||"VECTOR"}isManagerSameOrigin(){if(!this.ready)return!1;const e=new URL(this._config.managerUrl),t=window.location;return e.protocol===t.protocol&&e.hostname===t.hostname&&e.port===t.port}addListener(e){this._listeners.indexOf(e)<0&&this._listeners.push(e)}removeListener(e){const t=this._listeners.indexOf(e);t>=0&&this._listeners.splice(t,1)}init(e){return lib_awaiter(this,void 0,void 0,(function*(){this._config&&console.log("Already initialised"),this._config=function normaliseConfig(e){const t=e?Object.assign({},e):{};return t.managerUrl&&""!==t.managerUrl?t.managerUrl=t.managerUrl.replace(/\/+$/,""):t.managerUrl=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),t.realm&&""!==t.realm||(t.realm="master"),t.auth||(t.auth="KEYCLOAK"),void 0===t.consoleAutoEnable&&(t.consoleAutoEnable=!0),void 0===t.applyConfigToAdmin&&(t.applyConfigToAdmin=!0),t.eventProviderType||(t.eventProviderType="WEBSOCKET"),(!t.pollingIntervalMillis||t.pollingIntervalMillis<5e3)&&(t.pollingIntervalMillis=1e4),void 0===t.loadIcons&&(t.loadIcons=!0),void 0===t.loadTranslations&&(t.loadTranslations=["or"]),void 0===t.translationsLoadPath&&(t.translationsLoadPath="locales/{{lng}}/{{ns}}.json"),void 0===t.loadDescriptors&&(t.loadDescriptors=!0),void 0===t.clientId&&(t.clientId="openremote"),t}(e);let t=yield this.loadManagerInfo();if("BASIC"===this._config.auth)t=(yield this.doTranslateInit())&&t,t=yield this.doAuthInit();else if("KEYCLOAK"===this._config.auth){if(!this._config.keycloakUrl&&this._authServerUrl){const e=new URL(this._config.managerUrl);let t;this._authServerUrl.startsWith("//")&&(this._authServerUrl=e.protocol+this._authServerUrl);try{t=new URL(this._authServerUrl)}catch(i){t=new URL(e),t.pathname=this._authServerUrl}t.protocol||(t.protocol=e.protocol),t.hostname||(t.hostname=e.hostname),t.port||(t.port=e.port),this._config.keycloakUrl=t.toString()}this._config.keycloakUrl||(this._config.keycloakUrl=this._config.managerUrl+"/auth"),this._config.keycloakUrl=this._config.keycloakUrl.replace(/\/+$/,""),t=yield this.doAuthInit(),t||this._config.skipFallbackToBasicAuth||(console.log("Falling back to basic auth"),this._config.auth="BASIC",t=yield this.doAuthInit())}return t&&(t=this.doRestApiInit()),(yield this.doConsoleInit())&&this._clearWebHistory(),t=(yield this.doTranslateInit())&&t,t&&(t=yield this.doDescriptorsInit(),t=yield this.getConsoleAppConfig()),this.doIconInit(),t?(this._readyCallback&&(yield this._readyCallback()),this._ready=!0,this._emitEvent(OREvent.READY)):(this._config=void 0,console.warn("Failed to initialise the manager")),this.displayRealm=e.realm||"master",t}))}loadManagerInfo(){return lib_awaiter(this,void 0,void 0,(function*(){try{const e=yield new Promise(((e,t)=>{const i=new XMLHttpRequest;i.addEventListener("load",(()=>{e(JSON.parse(i.responseText))})),i.addEventListener("error",(()=>{t(new Error("Failed to contact the manager"))})),i.open("GET",this._config.managerUrl+"/api/master/info"),i.send()}));return this._managerVersion=e&&e.version?e.version:"",this._authServerUrl=e&&e.authServerUrl?e.authServerUrl:"",!0}catch(e){return console.error("Failed to contact the manager",e),this._setError(ORError.MANAGER_FAILED_TO_LOAD),!1}}))}doTranslateInit(){return lib_awaiter(this,void 0,void 0,(function*(){if(i18next.Ay.isInitialized)return!0;i18next.Ay.on("initialized",(e=>{this._emitEvent(OREvent.TRANSLATE_INIT)})),i18next.Ay.on("languageChanged",(e=>{moment_default().locale(e),this._emitEvent(OREvent.TRANSLATE_LANGUAGE_CHANGED)}));const e=this.console?yield this.console.retrieveData("LANGUAGE"):void 0,t={lng:e&&"null"!==e?e:this.config.defaultLanguage||"en",fallbackLng:"en",defaultNS:"app",fallbackNS:"or",ns:this.config.loadTranslations,interpolation:{format:(e,t,i)=>"uppercase"===t?e.toUpperCase():e instanceof Date?moment_default()(e).format(t):e},backend:{loadPath:(e,t)=>1===t.length&&"or"===t[0]?this.config.managerUrl+"/shared/locales/{{lng}}/{{ns}}.json":this.config.translationsLoadPath?this.config.translationsLoadPath:"locales/{{lng}}/{{ns}}.json"}};this.config.configureTranslationsOptions&&this.config.configureTranslationsOptions(t);try{yield i18next.Ay.use(esm.A).init(t)}catch(e){return console.error(e),this._setError(ORError.TRANSLATION_ERROR),!1}return!0}))}doDescriptorsInit(){return lib_awaiter(this,void 0,void 0,(function*(){if(!this.config.loadDescriptors)return!0;try{const e=yield rest_lib.Ay.api.AssetModelResource.getAssetInfos(),t=yield rest_lib.Ay.api.AssetModelResource.getMetaItemDescriptors(),i=yield rest_lib.Ay.api.AssetModelResource.getValueDescriptors();model_lib.u0._assetTypeInfos=e.data,model_lib.u0._metaItemDescriptors=Object.values(t.data),model_lib.u0._valueDescriptors=Object.values(i.data)}catch(e){return console.error(e),!1}return!0}))}doAuthInit(){return lib_awaiter(this,void 0,void 0,(function*(){let e=!0;switch(this._config.auth){case"BASIC":e=yield this.initialiseBasicAuth();break;case"KEYCLOAK":e=yield this.loadAndInitialiseKeycloak();break;case"NONE":return!0;default:return this._setError(ORError.AUTH_TYPE_UNSUPPORTED),!1}return rest_lib.Ay.addRequestInterceptor((e=>{if(!e.headers.Authorization){const t=this.getAuthorizationHeader();t&&(e.headers.Authorization=t)}return e})),e}))}doRestApiInit(){return rest_lib.Ay.setTimeout(1e4),rest_lib.Ay.initialise(this.getApiBaseUrl()),!0}doEventsSubscriptionInit(){return lib_awaiter(this,void 0,void 0,(function*(){let e=!1;return"WEBSOCKET"===this._config.eventProviderType&&(this._events=new WebSocketEventProvider(this._config.managerUrl),this._events.subscribeStatusChange((e=>this._onEventProviderStatusChanged(e))),e=yield this._events.connect()),e||this._setError(ORError.EVENTS_CONNECTION_ERROR),e}))}reconnect(e=!1){(this._authDisconnected||e)&&this._runAuthReconnectTimer(),(this._eventsDisconnected||e)&&this._tryReconnectEvents()}_runAuthReconnectTimer(e=5e3,t=2e4){if(this._authReconnectTimeout)this._tryUpdateAccessToken();else{const i=()=>{this._tryUpdateAccessToken().then((n=>{n?(e=Math.min(t,Math.round(1.2*e)),console.debug(`Authentication service reconnect failed. Trying again in ${e} milliseconds...`),this._authReconnectTimeout=window.setTimeout(i,e),this._emitEvent(OREvent.RECONNECT_FAILED)):this._finishAuthReconnectTimer(!0)})).catch((e=>{console.error(e),this._finishAuthReconnectTimer(!1)}))};i()}}_finishAuthReconnectTimer(e){this._authReconnectTimeout&&(clearTimeout(this._authReconnectTimeout),delete this._authReconnectTimeout,e&&this._setAuthDisconnected(!1))}isKeycloakReachable(){return lib_awaiter(this,void 0,void 0,(function*(){const e=new AbortController,t=setTimeout((()=>e.abort()),2e3);try{return yield fetch(this._config.keycloakUrl+"/health/ready",{method:"HEAD",mode:"no-cors",signal:e.signal}),Promise.resolve()}catch(e){return Promise.reject(e)}finally{clearTimeout(t)}}))}_tryUpdateAccessToken(){return lib_awaiter(this,void 0,void 0,(function*(){let e=!1;return this.isKeycloak()&&(console.debug("Attempting to update keycloak access token..."),this._emitEvent(OREvent.CONNECTING),yield this.isKeycloakReachable().catch((()=>{e=!0,console.error("Could not reach keycloak service! Aborting token update.")})),e||(yield this.updateKeycloakAccessToken().catch((t=>{e=!0,console.error(t)})))),this._setAuthDisconnected(e),e}))}_tryReconnectEvents(){var e,t,i;if((null===(e=this.events)||void 0===e?void 0:e.status)!==EventProviderStatus.CONNECTED)if((null===(t=this.events)||void 0===t?void 0:t.status)===EventProviderStatus.DISCONNECTED)this._connectEvents();else if((null===(i=this.events)||void 0===i?void 0:i.status)===EventProviderStatus.CONNECTING){const e=t=>{var i;t===EventProviderStatus.DISCONNECTED&&(null===(i=this.events)||void 0===i||i.unsubscribeStatusChange(e),this._connectEvents())};this.events.subscribeStatusChange(e),setTimeout((()=>{var t;null===(t=this.events)||void 0===t||t.unsubscribeStatusChange(e)}),4e3)}}_connectEvents(){var e;(null===(e=this.events)||void 0===e?void 0:e.status)===EventProviderStatus.DISCONNECTED?this.events.connect().catch((e=>{console.error("Failed to connect EventProvider."),console.error(e)})):console.warn("Tried to connect EventProvider, but it wasn't disconnected!")}_onEventProviderStatusChanged(e){switch(e){case EventProviderStatus.DISCONNECTED:this._setEventDisconnected(!0);break;case EventProviderStatus.CONNECTED:this._setEventDisconnected(!1);break;case EventProviderStatus.CONNECTING:this._emitEvent(OREvent.CONNECTING);break;case EventProviderStatus.RECONNECT_FAILED:this._emitEvent(OREvent.RECONNECT_FAILED)}}doConsoleInit(){return lib_awaiter(this,void 0,void 0,(function*(){try{const e=new Console(this._config.realm,this._config.consoleAutoEnable,(()=>{this._emitEvent(OREvent.CONSOLE_READY)}));return this._console=e,yield e.initialise(),this._emitEvent(OREvent.CONSOLE_INIT),!0}catch(e){return this._setError(ORError.CONSOLE_ERROR),!1}}))}doIconInit(){this._config.loadIcons&&(or_icon_lib.Ri.addIconSet("mdi",(0,or_icon_lib.mb)(manager.config.managerUrl)),or_icon_lib.Ri.addIconSet("or",(0,or_icon_lib.e4)(or_icon_lib.Bv.size,or_icon_lib.Bv.icons)))}getConsoleAppConfig(){return lib_awaiter(this,void 0,void 0,(function*(){try{const e=yield fetch(manager.config.managerUrl+"/consoleappconfig/"+manager.displayRealm+".json");return this._consoleAppConfig=yield e.json(),!0}catch(e){return!0}}))}logout(e){this._keycloak?(this.console.isMobile&&this.console.storeData("REFRESH_TOKEN",null),this._keycloak.logout(e&&""!==e?{redirectUri:e}:void 0)):this._basicIdentity&&(this._basicIdentity=void 0,e?window.location.href=e:window.location.reload())}login(e){switch(this._config.auth){case"BASIC":e&&e.credentials&&(this._config.credentials=Object.assign({},e.credentials)),this.doBasicLogin();break;case"KEYCLOAK":if(this._keycloak){const t={};e&&e.redirectUrl&&""!==e.redirectUrl&&(t.redirectUri=e.redirectUrl),this.isMobile()&&(t.scope="offline_access"),this._keycloak.login(t)}}}initialiseBasicAuth(){return lib_awaiter(this,void 0,void 0,(function*(){return this.config.basicLoginProvider?(this.config.autoLogin&&(this._readyCallback=()=>this.doBasicLogin()),!0):(console.log("No basicLoginProvider defined on config so cannot display login UI"),!1)}))}doBasicLogin(){var e,t,i,n;return lib_awaiter(this,void 0,void 0,(function*(){if(!this.config.basicLoginProvider)return;let o={username:(null===(e=this._config.credentials)||void 0===e?void 0:e.username)?null===(t=this._config.credentials)||void 0===t?void 0:t.username:"",password:(null===(i=this._config.credentials)||void 0===i?void 0:i.password)?null===(n=this._config.credentials)||void 0===n?void 0:n.password:"",cancel:!1},s=!1;for(this._basicIdentity={roles:void 0,token:void 0,user:void 0};!s;){if(o=yield this.config.basicLoginProvider(o.username,o.password),o.cancel){console.log("Basic authentication cancelled by user");break}if(!o.username||!o.password)continue;this._basicIdentity.token=btoa(o.username+":"+o.password);let e=!1;try{const t=yield rest_lib.Ay.api.UserResource.getCurrent();200===t.status&&(e=!0,this._basicIdentity.user=t.data),e||401!==t.status&&403!==t.status||console.log("Basic authentication invalid credentials, trying again")}catch(e){console.error("Basic auth failed: ",e)}if(!e){console.log("Unknown response so aborting"),this._basicIdentity=void 0;break}{console.log("Basic authentication successful"),s=!0;const e=yield rest_lib.Ay.api.UserResource.getCurrentUserRoles();this._basicIdentity.roles=e.data}}this._setAuthenticated(s)}))}isSuperUser(){return!(!this.getRealm()||"master"!==this.getRealm()||!this.hasRealmRole("admin"))}isRestrictedUser(){return!!this.hasRealmRole("restricted_user")}getApiBaseUrl(){let e=this._config.managerUrl;return e+="/api/"+this._config.realm+"/",e}getAppName(){const e=location.pathname.split("/");return e.length>=1?e[1]:""}hasRealmRole(e){return this.isKeycloak()&&this._keycloak.hasRealmRole(e)}hasRole(e,t=this._config.clientId){const i=this.roles;return i&&i.has(t)&&i.get(t).indexOf(e)>=0}getAuthorizationHeader(){return this.getKeycloakToken()?"Bearer "+this.getKeycloakToken():this.getBasicToken()?"Basic "+this.getBasicToken():void 0}getKeycloakToken(){if(this.isKeycloak())return this._keycloak.token}getBasicToken(){return this._basicIdentity?this._basicIdentity.token:void 0}isTokenExpired(e=2e3){var t,i,n;return this.isKeycloak()?(null===(i=null===(t=this._keycloak)||void 0===t?void 0:t.tokenParsed)||void 0===i?void 0:i.exp)<=moment_default()().add(e,"milliseconds").unix():!(null===(n=this._basicIdentity)||void 0===n?void 0:n.token)}getRealm(){if(this._config)return this._config.realm}isMobile(){return this.console&&this.console.isMobile}isKeycloak(){return!!this._keycloak}_onAuthenticated(){var e;this.console&&this.console.isMobile&&"KEYCLOAK"===this.config.auth&&(this._keycloak&&"Offline"===(null===(e=this._keycloak.refreshTokenParsed)||void 0===e?void 0:e.typ)?(console.debug("Storing offline refresh token"),this.console.storeData("REFRESH_TOKEN",this._keycloak.refreshToken)):this.login())}loadAndInitialiseKeycloak(){var e,t;return lib_awaiter(this,void 0,void 0,(function*(){try{this._keycloak=new keycloak.A({clientId:this._config.clientId,realm:this._config.realm,url:this._config.keycloakUrl}),this._keycloak.onAuthSuccess=()=>{this._finishAuthReconnectTimer(!0)},this._keycloak.onAuthError=()=>{this._setAuthenticated(!1)},this._keycloak.onAuthRefreshError=()=>{console.debug("Keycloak failed to refresh the access token."),this._setAuthDisconnected(!0)};const i=yield this._getNativeOfflineRefreshToken(),n=yield this._keycloak.init({checkLoginIframe:!1,onLoad:this._config.autoLogin?"login-required":"check-sso",refreshToken:i});return n&&(this._name=null===(e=this._keycloak.tokenParsed)||void 0===e?void 0:e.name,this._username=null===(t=this._keycloak.tokenParsed)||void 0===t?void 0:t.preferred_username,this._keycloakUpdateTokenInterval&&(clearInterval(this._keycloakUpdateTokenInterval),delete this._keycloakUpdateTokenInterval),this._keycloakUpdateTokenInterval=window.setInterval((()=>{this._authDisconnected||this.updateKeycloakAccessToken().catch((()=>{console.error("Could not update keycloak access token during regular interval.")}))}),1e4),this._onAuthenticated()),this._setAuthenticated(n),!0}catch(e){return this._setAuthenticated(!1),this._setError(ORError.AUTH_FAILED),console.error("Failed to initialise Keycloak: "+e),!1}}))}updateKeycloakAccessToken(){return lib_awaiter(this,void 0,void 0,(function*(){const e=this._keycloak.updateToken(30);let t;return e.then((e=>{console.debug("Access token update success, refreshed from server: "+e)})).catch((()=>{console.error("Access token update failed."),this._setAuthDisconnected(!0)})),Promise.race([e,new Promise(((e,i)=>t=setTimeout(i,15e3)))]).finally((()=>clearTimeout(t)))}))}_getNativeOfflineRefreshToken(){return lib_awaiter(this,void 0,void 0,(function*(){if(this.console&&this.console.isMobile)return yield this.console.retrieveData("REFRESH_TOKEN")}))}_emitEvent(e){window.setTimeout((()=>{const t=this._listeners;for(const i of t)i(e)}),0)}_setError(e){this._error=e,this._emitEvent(OREvent.ERROR),console.log("Error set: "+e)}_setAuthenticated(e){this._authenticated=e,this._events&&this._events.disconnect(),this._events||this.doEventsSubscriptionInit()}_setAuthDisconnected(e,t=!1){(this._authDisconnected!==e||t)&&(console.debug("Authentication service status changed: "+(e?"DISCONNECTED":"CONNECTED")),e?(this._authDisconnected=!0,this._runAuthReconnectTimer(),this._emitEvent(OREvent.OFFLINE)):(this._authDisconnected=!1,this._eventsDisconnected?this._tryReconnectEvents():this._emitEvent(OREvent.ONLINE)))}_setEventDisconnected(e,t=!1){(this._eventsDisconnected!==e||t)&&(console.debug("EventProvider status changed: "+(e?"DISCONNECTED":"CONNECTED")),e?(this._eventsDisconnected=!0,this._emitEvent(OREvent.OFFLINE),this.isTokenExpired()&&!this._authDisconnected&&this._tryUpdateAccessToken().then((e=>{e||this._setAuthDisconnected(!1,!0)}))):(this._eventsDisconnected=!1,this._authDisconnected?this._runAuthReconnectTimer():this._emitEvent(OREvent.ONLINE)))}_clearWebHistory(){var e;null===(e=this.console)||void 0===e||e._doSendGenericMessage("CLEAR_WEB_HISTORY",void 0)}},core_lib=manager},"../../component/or-translate/lib/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{mR:()=>OrTranslate,MR:()=>i18next.Ay,Tl:()=>translate});const translate=e=>t=>class extends t{constructor(){super(...arguments),this._i18nextJustInitialized=!1,this.initCallback=e=>{this._i18nextJustInitialized=!0,this.requestUpdate&&this.requestUpdate()},this.langChangedCallback=()=>{this.requestUpdate&&this.requestUpdate()}}connectedCallback(){e.language||e.on("initialized",this.initCallback),e.on("languageChanged",this.langChangedCallback),super.connectedCallback&&super.connectedCallback()}disconnectedCallback(){e.off("initialized",this.initCallback),e.off("languageChanged",this.langChangedCallback),super.disconnectedCallback&&super.disconnectedCallback()}shouldUpdate(e){return this._i18nextJustInitialized?(this._i18nextJustInitialized=!1,!0):super.shouldUpdate&&super.shouldUpdate(e)}};var i18next=__webpack_require__("../../../node_modules/i18next/dist/esm/i18next.js"),lit=__webpack_require__("../../../node_modules/lit/index.js"),decorators=__webpack_require__("../../../node_modules/lit/decorators.js"),__decorate=function(t,e,r,a){var o,n=arguments.length,l=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,r,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(l=(n<3?o(l):n>3?o(e,r,l):o(e,r))||l);return n>3&&l&&Object.defineProperty(e,r,l),l};let OrTranslate=class extends(translate(i18next.Ay)(lit.WF)){render(){return lit.qy`
            ${this._getTranslatedValue()}
        `}_getTranslatedValue(){return this.value?i18next.Ay.isInitialized?i18next.Ay.t(this.value,this.options):this.value:""}};OrTranslate.styles=lit.AH`
        :host {
            display: inline-block;
        }
        
        :host([hidden]) {
            display: none;
        }
    `,__decorate([(0,decorators.MZ)({type:String})],OrTranslate.prototype,"value",void 0),__decorate([(0,decorators.MZ)({type:Object})],OrTranslate.prototype,"options",void 0),OrTranslate=__decorate([(0,decorators.EM)("or-translate")],OrTranslate)},"../../component/rest/lib/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>rest_lib,F0:()=>isAxiosError});var axios=__webpack_require__("../../../node_modules/axios/index.js"),axios_default=__webpack_require__.n(axios);class SyslogResourceClient{constructor(t){this.httpClient=t}getConfig(t){return this.httpClient.request({method:"GET",url:uriEncoding`syslog/config`,options:t})}updateConfig(t,e){return this.httpClient.request({method:"PUT",url:uriEncoding`syslog/config`,data:t,options:e})}clearEvents(t){return this.httpClient.request({method:"DELETE",url:uriEncoding`syslog/event`,options:t})}getEvents(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`syslog/event`,queryParams:t,options:e})}}class GatewayClientResourceClient{constructor(t){this.httpClient=t}deleteConnections(t,e){return this.httpClient.request({method:"DELETE",url:uriEncoding`gateway/connection`,queryParams:t,options:e})}getConnections(t){return this.httpClient.request({method:"GET",url:uriEncoding`gateway/connection`,options:t})}deleteConnection(t,e){return this.httpClient.request({method:"DELETE",url:uriEncoding`gateway/connection/${t}`,options:e})}getConnection(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`gateway/connection/${t}`,options:e})}setConnection(t,e,s){return this.httpClient.request({method:"PUT",url:uriEncoding`gateway/connection/${t}`,data:e,options:s})}getConnectionStatus(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`gateway/status/${t}`,options:e})}}class ConsoleResourceClient{constructor(t){this.httpClient=t}register(t,e){return this.httpClient.request({method:"POST",url:uriEncoding`console/register`,data:t,options:e})}}class NotificationResourceClient{constructor(t){this.httpClient=t}getNotifications(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`notification`,queryParams:t,options:e})}removeNotifications(t,e){return this.httpClient.request({method:"DELETE",url:uriEncoding`notification`,queryParams:t,options:e})}sendNotification(t,e){return this.httpClient.request({method:"POST",url:uriEncoding`notification/alert`,data:t,options:e})}removeNotification(t,e){return this.httpClient.request({method:"DELETE",url:uriEncoding`notification/${t}`,options:e})}notificationAcknowledged(t,e,s,r){return this.httpClient.request({method:"PUT",url:uriEncoding`notification/${t}/acknowledged`,queryParams:s,data:e,options:r})}notificationDelivered(t,e,s){return this.httpClient.request({method:"PUT",url:uriEncoding`notification/${t}/delivered`,queryParams:e,options:s})}}class UserResourceClient{constructor(t){this.httpClient=t}query(t,e){return this.httpClient.request({method:"POST",url:uriEncoding`user/query`,data:t,options:e})}getCurrent(t){return this.httpClient.request({method:"GET",url:uriEncoding`user/user`,options:t})}getCurrentUserRealmRoles(t){return this.httpClient.request({method:"GET",url:uriEncoding`user/userRealmRoles`,options:t})}getCurrentUserRoles(t){return this.httpClient.request({method:"GET",url:uriEncoding`user/userRoles`,options:t})}getCurrentUserClientRoles(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`user/userRoles/${t}`,options:e})}disconnectUserSession(t,e,s){return this.httpClient.request({method:"GET",url:uriEncoding`user/${t}/disconnect/${e}`,options:s})}resetPassword(t,e,s,r){return this.httpClient.request({method:"PUT",url:uriEncoding`user/${t}/reset-password/${e}`,data:s,options:r})}resetSecret(t,e,s){return this.httpClient.request({method:"GET",url:uriEncoding`user/${t}/reset-secret/${e}`,options:s})}getRoles(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`user/${t}/roles`,options:e})}updateRoles(t,e,s){return this.httpClient.request({method:"PUT",url:uriEncoding`user/${t}/roles`,data:e,options:s})}getUserRealmRoles(t,e,s){return this.httpClient.request({method:"GET",url:uriEncoding`user/${t}/userRealmRoles/${e}`,options:s})}updateUserRealmRoles(t,e,s,r){return this.httpClient.request({method:"PUT",url:uriEncoding`user/${t}/userRealmRoles/${e}`,data:s,options:r})}getUserRoles(t,e,s){return this.httpClient.request({method:"GET",url:uriEncoding`user/${t}/userRoles/${e}`,options:s})}updateUserRoles(t,e,s,r){return this.httpClient.request({method:"PUT",url:uriEncoding`user/${t}/userRoles/${e}`,data:s,options:r})}getUserClientRoles(t,e,s,r){return this.httpClient.request({method:"GET",url:uriEncoding`user/${t}/userRoles/${e}/${s}`,options:r})}updateUserClientRoles(t,e,s,r,o){return this.httpClient.request({method:"PUT",url:uriEncoding`user/${t}/userRoles/${e}/${s}`,data:r,options:o})}getUserSessions(t,e,s){return this.httpClient.request({method:"GET",url:uriEncoding`user/${t}/userSessions/${e}`,options:s})}create(t,e,s){return this.httpClient.request({method:"POST",url:uriEncoding`user/${t}/users`,data:e,options:s})}update(t,e,s){return this.httpClient.request({method:"PUT",url:uriEncoding`user/${t}/users`,data:e,options:s})}delete(t,e,s){return this.httpClient.request({method:"DELETE",url:uriEncoding`user/${t}/users/${e}`,options:s})}getClientRoles(t,e,s){return this.httpClient.request({method:"GET",url:uriEncoding`user/${t}/${e}/roles`,options:s})}updateClientRoles(t,e,s,r){return this.httpClient.request({method:"PUT",url:uriEncoding`user/${t}/${e}/roles`,data:s,options:r})}get(t,e,s){return this.httpClient.request({method:"GET",url:uriEncoding`user/${t}/${e}`,options:s})}}class DashboardResourceClient{constructor(t){this.httpClient=t}create(t,e){return this.httpClient.request({method:"POST",url:uriEncoding`dashboard`,data:t,options:e})}update(t,e){return this.httpClient.request({method:"PUT",url:uriEncoding`dashboard`,data:t,options:e})}getAllRealmDashboards(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`dashboard/all/${t}`,options:e})}query(t,e){return this.httpClient.request({method:"POST",url:uriEncoding`dashboard/query`,data:t,options:e})}delete(t,e,s){return this.httpClient.request({method:"DELETE",url:uriEncoding`dashboard/${t}/${e}`,options:s})}get(t,e,s){return this.httpClient.request({method:"GET",url:uriEncoding`dashboard/${t}/${e}`,options:s})}}class AppResourceClient{constructor(t){this.httpClient=t}getApps(t){return this.httpClient.request({method:"GET",url:uriEncoding`apps`,options:t})}getConsoleConfig(t){return this.httpClient.request({method:"GET",url:uriEncoding`apps/consoleConfig`,options:t})}getAppInfos(t){return this.httpClient.request({method:"GET",url:uriEncoding`apps/info`,options:t})}}class ConfigurationResourceClient{constructor(t){this.httpClient=t}update(t,e){return this.httpClient.request({method:"PUT",url:uriEncoding`configuration/manager`,data:t,options:e})}fileUpload(t,e,s){return this.httpClient.request({method:"POST",url:uriEncoding`configuration/manager/file`,queryParams:e,data:t,options:s})}}class AssetModelResourceClient{constructor(t){this.httpClient=t}getAssetDescriptors(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`model/assetDescriptors`,queryParams:t,options:e})}getAssetInfo(t,e,s){return this.httpClient.request({method:"GET",url:uriEncoding`model/assetInfo/${t}`,queryParams:e,options:s})}getAssetInfos(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`model/assetInfos`,queryParams:t,options:e})}getMetaItemDescriptors(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`model/metaItemDescriptors`,queryParams:t,options:e})}getValueDescriptors(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`model/valueDescriptors`,queryParams:t,options:e})}}class GatewayServiceResourceClient{constructor(t){this.httpClient=t}startTunnel(t,e){return this.httpClient.request({method:"POST",url:uriEncoding`gateway/tunnel`,data:t,options:e})}stopTunnel(t,e){return this.httpClient.request({method:"DELETE",url:uriEncoding`gateway/tunnel`,data:t,options:e})}getAllActiveTunnelInfos(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`gateway/tunnel/${t}`,options:e})}getGatewayActiveTunnelInfos(t,e,s){return this.httpClient.request({method:"GET",url:uriEncoding`gateway/tunnel/${t}/${e}`,options:s})}getActiveTunnelInfo(t,e,s,r,o){return this.httpClient.request({method:"GET",url:uriEncoding`gateway/tunnel/${t}/${e}/${s}/${r}`,options:o})}}class AssetPredictedDatapointResourceClient{constructor(t){this.httpClient=t}getPredictedDatapoints(t,e,s,r){return this.httpClient.request({method:"POST",url:uriEncoding`asset/predicted/${t}/${e}`,data:s,options:r})}writePredictedDatapoints(t,e,s,r){return this.httpClient.request({method:"PUT",url:uriEncoding`asset/predicted/${t}/${e}`,data:s,options:r})}}class AssetResourceClient{constructor(t){this.httpClient=t}create(t,e){return this.httpClient.request({method:"POST",url:uriEncoding`asset`,data:t,options:e})}delete(t,e){return this.httpClient.request({method:"DELETE",url:uriEncoding`asset`,queryParams:t,options:e})}writeAttributeValues(t,e){return this.httpClient.request({method:"PUT",url:uriEncoding`asset/attributes`,data:t,options:e})}updateNoneParent(t,e){return this.httpClient.request({method:"DELETE",url:uriEncoding`asset/parent`,queryParams:t,options:e})}getPartial(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`asset/partial/${t}`,options:e})}queryAssets(t,e){return this.httpClient.request({method:"POST",url:uriEncoding`asset/query`,data:t,options:e})}getCurrentUserAssets(t){return this.httpClient.request({method:"GET",url:uriEncoding`asset/user/current`,options:t})}createUserAssetLinks(t,e){return this.httpClient.request({method:"POST",url:uriEncoding`asset/user/link`,data:t,options:e})}getUserAssetLinks(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`asset/user/link`,queryParams:t,options:e})}deleteUserAssetLinks(t,e){return this.httpClient.request({method:"POST",url:uriEncoding`asset/user/link/delete`,data:t,options:e})}deleteAllUserAssetLinks(t,e,s){return this.httpClient.request({method:"DELETE",url:uriEncoding`asset/user/link/${t}/${e}`,options:s})}deleteUserAssetLink(t,e,s,r){return this.httpClient.request({method:"DELETE",url:uriEncoding`asset/user/link/${t}/${e}/${s}`,options:r})}get(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`asset/${t}`,options:e})}update(t,e,s){return this.httpClient.request({method:"PUT",url:uriEncoding`asset/${t}`,data:e,options:s})}writeAttributeValue(t,e,s,r){return this.httpClient.request({method:"PUT",url:uriEncoding`asset/${t}/attribute/${e}`,data:s,options:r})}updateParent(t,e,s){return this.httpClient.request({method:"PUT",url:uriEncoding`asset/${t}/child`,queryParams:e,options:s})}}class FlowResourceClient{constructor(t){this.httpClient=t}getAllNodeDefinitions(t){return this.httpClient.request({method:"GET",url:uriEncoding`flow`,options:t})}getNodeDefinition(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`flow/${t}`,options:e})}getAllNodeDefinitionsByType(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`flow/${t}`,options:e})}}class MapResourceClient{constructor(t){this.httpClient=t}getSettings(t){return this.httpClient.request({method:"GET",url:uriEncoding`map`,options:t})}saveSettings(t,e){return this.httpClient.request({method:"PUT",url:uriEncoding`map`,data:t,options:e})}getSettingsJs(t){return this.httpClient.request({method:"GET",url:uriEncoding`map/js`,options:t})}getTile(t,e,s,r){return this.httpClient.request({method:"GET",url:uriEncoding`map/tile/${t}/${e}/${s}`,options:r})}}class AssetDatapointResourceClient{constructor(t){this.httpClient=t}getDatapointExport(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`asset/datapoint/export`,queryParams:t,options:e})}getDatapointPeriod(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`asset/datapoint/periods`,queryParams:t,options:e})}getDatapoints(t,e,s,r){return this.httpClient.request({method:"POST",url:uriEncoding`asset/datapoint/${t}/${e}`,data:s,options:r})}}class AgentResourceClient{constructor(t){this.httpClient=t}doProtocolAssetDiscovery(t,e,s){return this.httpClient.request({method:"GET",url:uriEncoding`agent/assetDiscovery/${t}`,queryParams:e,options:s})}doProtocolAssetImport(t,e,s,r){return this.httpClient.request({method:"POST",url:uriEncoding`agent/assetImport/${t}`,queryParams:s,data:e,options:r})}doProtocolInstanceDiscovery(t,e,s){return this.httpClient.request({method:"GET",url:uriEncoding`agent/instanceDiscovery/${t}`,queryParams:e,options:s})}}class StatusResourceClient{constructor(t){this.httpClient=t}getHealthStatus(t){return this.httpClient.request({method:"GET",url:uriEncoding`health`,options:t})}getInfo(t){return this.httpClient.request({method:"GET",url:uriEncoding`info`,options:t})}}class RulesResourceClient{constructor(t){this.httpClient=t}createGlobalRuleset(t,e){return this.httpClient.request({method:"POST",url:uriEncoding`rules`,data:t,options:e})}getGlobalRulesets(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`rules`,queryParams:t,options:e})}createAssetRuleset(t,e){return this.httpClient.request({method:"POST",url:uriEncoding`rules/asset`,data:t,options:e})}getAssetRulesets(t,e,s){return this.httpClient.request({method:"GET",url:uriEncoding`rules/asset/for/${t}`,queryParams:e,options:s})}deleteAssetRuleset(t,e){return this.httpClient.request({method:"DELETE",url:uriEncoding`rules/asset/${t}`,options:e})}getAssetRuleset(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`rules/asset/${t}`,options:e})}updateAssetRuleset(t,e,s){return this.httpClient.request({method:"PUT",url:uriEncoding`rules/asset/${t}`,data:e,options:s})}getAssetGeofences(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`rules/geofences/${t}`,options:e})}getAssetEngineInfo(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`rules/info/asset/${t}`,options:e})}getGlobalEngineInfo(t){return this.httpClient.request({method:"GET",url:uriEncoding`rules/info/global`,options:t})}getRealmEngineInfo(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`rules/info/realm/${t}`,options:e})}createRealmRuleset(t,e){return this.httpClient.request({method:"POST",url:uriEncoding`rules/realm`,data:t,options:e})}getRealmRulesets(t,e,s){return this.httpClient.request({method:"GET",url:uriEncoding`rules/realm/for/${t}`,queryParams:e,options:s})}deleteRealmRuleset(t,e){return this.httpClient.request({method:"DELETE",url:uriEncoding`rules/realm/${t}`,options:e})}getRealmRuleset(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`rules/realm/${t}`,options:e})}updateRealmRuleset(t,e,s){return this.httpClient.request({method:"PUT",url:uriEncoding`rules/realm/${t}`,data:e,options:s})}deleteGlobalRuleset(t,e){return this.httpClient.request({method:"DELETE",url:uriEncoding`rules/${t}`,options:e})}getGlobalRuleset(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`rules/${t}`,options:e})}updateGlobalRuleset(t,e,s){return this.httpClient.request({method:"PUT",url:uriEncoding`rules/${t}`,data:e,options:s})}}class RealmResourceClient{constructor(t){this.httpClient=t}create(t,e){return this.httpClient.request({method:"POST",url:uriEncoding`realm`,data:t,options:e})}getAll(t){return this.httpClient.request({method:"GET",url:uriEncoding`realm`,options:t})}getAccessible(t){return this.httpClient.request({method:"GET",url:uriEncoding`realm/accessible`,options:t})}delete(t,e){return this.httpClient.request({method:"DELETE",url:uriEncoding`realm/${t}`,options:e})}get(t,e){return this.httpClient.request({method:"GET",url:uriEncoding`realm/${t}`,options:e})}update(t,e,s){return this.httpClient.request({method:"PUT",url:uriEncoding`realm/${t}`,data:e,options:s})}}class ProvisioningResourceClient{constructor(t){this.httpClient=t}createProvisioningConfig(t,e){return this.httpClient.request({method:"POST",url:uriEncoding`provisioning`,data:t,options:e})}getProvisioningConfigs(t){return this.httpClient.request({method:"GET",url:uriEncoding`provisioning`,options:t})}deleteProvisioningConfig(t,e){return this.httpClient.request({method:"DELETE",url:uriEncoding`provisioning/${t}`,options:e})}updateProvisioningConfig(t,e,s){return this.httpClient.request({method:"PUT",url:uriEncoding`provisioning/${t}`,data:e,options:s})}}function uriEncoding(t,...e){let s="";for(let r=0;r<e.length;r++)s+=t[r],s+=encodeURIComponent(e[r]);return s+=t[t.length-1],s}class ApiClient{constructor(t,e=axios_default().create()){this._syslogResource=new AxiosSyslogResourceClient(t,e),this._gatewayClientResource=new AxiosGatewayClientResourceClient(t,e),this._consoleResource=new AxiosConsoleResourceClient(t,e),this._notificationResource=new AxiosNotificationResourceClient(t,e),this._userResource=new AxiosUserResourceClient(t,e),this._dashboardResource=new AxiosDashboardResourceClient(t,e),this._appResource=new AxiosAppResourceClient(t,e),this._configurationResource=new AxiosConfigurationResourceClient(t,e),this._assetModelResource=new AxiosAssetModelResourceClient(t,e),this._gatewayServiceResource=new AxiosGatewayServiceResourceClient(t,e),this._assetPredictedDatapointResource=new AxiosAssetPredictedDatapointResourceClient(t,e),this._assetResource=new AxiosAssetResourceClient(t,e),this._flowResource=new AxiosFlowResourceClient(t,e),this._mapResource=new AxiosMapResourceClient(t,e),this._assetDatapointResource=new AxiosAssetDatapointResourceClient(t,e),this._agentResource=new AxiosAgentResourceClient(t,e),this._statusResource=new AxiosStatusResourceClient(t,e),this._rulesResource=new AxiosRulesResourceClient(t,e),this._realmResource=new AxiosRealmResourceClient(t,e),this._provisioningResource=new AxiosProvisioningResourceClient(t,e),this._assetResource=new AxiosAssetResourceClient(t,e)}get SyslogResource(){return this._syslogResource}get GatewayClientResource(){return this._gatewayClientResource}get ConsoleResource(){return this._consoleResource}get NotificationResource(){return this._notificationResource}get UserResource(){return this._userResource}get DashboardResource(){return this._dashboardResource}get AppResource(){return this._appResource}get ConfigurationResource(){return this._configurationResource}get AssetModelResource(){return this._assetModelResource}get GatewayServiceResource(){return this._gatewayServiceResource}get AssetPredictedDatapointResource(){return this._assetPredictedDatapointResource}get AssetResource(){return this._assetResource}get FlowResource(){return this._flowResource}get MapResource(){return this._mapResource}get AssetDatapointResource(){return this._assetDatapointResource}get AgentResource(){return this._agentResource}get StatusResource(){return this._statusResource}get RulesResource(){return this._rulesResource}get RealmResource(){return this._realmResource}get ProvisioningResource(){return this._provisioningResource}}class AxiosHttpClient{constructor(t){this.axios=t}request(t){const e={};e.method=t.method,e.url=t.url,e.params=t.queryParams,e.data=t.data,function(t,e){if(null!=e)for(const s in e)e.hasOwnProperty(s)&&(t[s]=e[s])}(e,t.options);const s=t.copyFn;return this.axios.request(e).then((t=>(s&&t.data&&(t.originalData=t.data,t.data=s(t.data)),t)))}}class AxiosSyslogResourceClient extends SyslogResourceClient{constructor(t,e=axios_default().create()){e.defaults.baseURL=t,super(new AxiosHttpClient(e))}}class AxiosGatewayClientResourceClient extends GatewayClientResourceClient{constructor(t,e=axios_default().create()){e.defaults.baseURL=t,super(new AxiosHttpClient(e))}}class AxiosConsoleResourceClient extends ConsoleResourceClient{constructor(t,e=axios_default().create()){e.defaults.baseURL=t,super(new AxiosHttpClient(e))}}class AxiosNotificationResourceClient extends NotificationResourceClient{constructor(t,e=axios_default().create()){e.defaults.baseURL=t,super(new AxiosHttpClient(e))}}class AxiosUserResourceClient extends UserResourceClient{constructor(t,e=axios_default().create()){e.defaults.baseURL=t,super(new AxiosHttpClient(e))}}class AxiosDashboardResourceClient extends DashboardResourceClient{constructor(t,e=axios_default().create()){e.defaults.baseURL=t,super(new AxiosHttpClient(e))}}class AxiosAppResourceClient extends AppResourceClient{constructor(t,e=axios_default().create()){e.defaults.baseURL=t,super(new AxiosHttpClient(e))}}class AxiosConfigurationResourceClient extends ConfigurationResourceClient{constructor(t,e=axios_default().create()){e.defaults.baseURL=t,super(new AxiosHttpClient(e))}}class AxiosAssetModelResourceClient extends AssetModelResourceClient{constructor(t,e=axios_default().create()){e.defaults.baseURL=t,super(new AxiosHttpClient(e))}}class AxiosGatewayServiceResourceClient extends GatewayServiceResourceClient{constructor(t,e=axios_default().create()){e.defaults.baseURL=t,super(new AxiosHttpClient(e))}}class AxiosAssetPredictedDatapointResourceClient extends AssetPredictedDatapointResourceClient{constructor(t,e=axios_default().create()){e.defaults.baseURL=t,super(new AxiosHttpClient(e))}}class AxiosAssetResourceClient extends AssetResourceClient{constructor(t,e=axios_default().create()){e.defaults.baseURL=t,super(new AxiosHttpClient(e))}}class AxiosFlowResourceClient extends FlowResourceClient{constructor(t,e=axios_default().create()){e.defaults.baseURL=t,super(new AxiosHttpClient(e))}}class AxiosMapResourceClient extends MapResourceClient{constructor(t,e=axios_default().create()){e.defaults.baseURL=t,super(new AxiosHttpClient(e))}}class AxiosAssetDatapointResourceClient extends AssetDatapointResourceClient{constructor(t,e=axios_default().create()){e.defaults.baseURL=t,super(new AxiosHttpClient(e))}}class AxiosAgentResourceClient extends AgentResourceClient{constructor(t,e=axios_default().create()){e.defaults.baseURL=t,super(new AxiosHttpClient(e))}}class AxiosStatusResourceClient extends StatusResourceClient{constructor(t,e=axios_default().create()){e.defaults.baseURL=t,super(new AxiosHttpClient(e))}}class AxiosRulesResourceClient extends RulesResourceClient{constructor(t,e=axios_default().create()){e.defaults.baseURL=t,super(new AxiosHttpClient(e))}}class AxiosRealmResourceClient extends RealmResourceClient{constructor(t,e=axios_default().create()){e.defaults.baseURL=t,super(new AxiosHttpClient(e))}}class AxiosProvisioningResourceClient extends ProvisioningResourceClient{constructor(t,e=axios_default().create()){e.defaults.baseURL=t,super(new AxiosHttpClient(e))}}var lib=__webpack_require__("../../../node_modules/qs/lib/index.js"),lib_default=__webpack_require__.n(lib);const isAxiosError=axios_default().isAxiosError;const rest_lib=new class RestApi{get api(){return this._client}constructor(){this._axiosInstance=axios_default().create(),this._axiosInstance.defaults.headers.common["Content-Type"]="application/json",this._axiosInstance.interceptors.request.use((t=>(t.paramsSerializer=t=>lib_default().stringify(t,{arrayFormat:"repeat"}),t)))}get axiosInstance(){return this._axiosInstance}setTimeout(t){this._axiosInstance.defaults.timeout=t}addRequestInterceptor(t){this._axiosInstance.interceptors.request.use(t)}initialise(t){this._client=new ApiClient(t,this._axiosInstance)}}},"../../../node_modules/moment/locale sync recursive ^\\.\\/.*$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./af":"../../../node_modules/moment/locale/af.js","./af.js":"../../../node_modules/moment/locale/af.js","./ar":"../../../node_modules/moment/locale/ar.js","./ar-dz":"../../../node_modules/moment/locale/ar-dz.js","./ar-dz.js":"../../../node_modules/moment/locale/ar-dz.js","./ar-kw":"../../../node_modules/moment/locale/ar-kw.js","./ar-kw.js":"../../../node_modules/moment/locale/ar-kw.js","./ar-ly":"../../../node_modules/moment/locale/ar-ly.js","./ar-ly.js":"../../../node_modules/moment/locale/ar-ly.js","./ar-ma":"../../../node_modules/moment/locale/ar-ma.js","./ar-ma.js":"../../../node_modules/moment/locale/ar-ma.js","./ar-ps":"../../../node_modules/moment/locale/ar-ps.js","./ar-ps.js":"../../../node_modules/moment/locale/ar-ps.js","./ar-sa":"../../../node_modules/moment/locale/ar-sa.js","./ar-sa.js":"../../../node_modules/moment/locale/ar-sa.js","./ar-tn":"../../../node_modules/moment/locale/ar-tn.js","./ar-tn.js":"../../../node_modules/moment/locale/ar-tn.js","./ar.js":"../../../node_modules/moment/locale/ar.js","./az":"../../../node_modules/moment/locale/az.js","./az.js":"../../../node_modules/moment/locale/az.js","./be":"../../../node_modules/moment/locale/be.js","./be.js":"../../../node_modules/moment/locale/be.js","./bg":"../../../node_modules/moment/locale/bg.js","./bg.js":"../../../node_modules/moment/locale/bg.js","./bm":"../../../node_modules/moment/locale/bm.js","./bm.js":"../../../node_modules/moment/locale/bm.js","./bn":"../../../node_modules/moment/locale/bn.js","./bn-bd":"../../../node_modules/moment/locale/bn-bd.js","./bn-bd.js":"../../../node_modules/moment/locale/bn-bd.js","./bn.js":"../../../node_modules/moment/locale/bn.js","./bo":"../../../node_modules/moment/locale/bo.js","./bo.js":"../../../node_modules/moment/locale/bo.js","./br":"../../../node_modules/moment/locale/br.js","./br.js":"../../../node_modules/moment/locale/br.js","./bs":"../../../node_modules/moment/locale/bs.js","./bs.js":"../../../node_modules/moment/locale/bs.js","./ca":"../../../node_modules/moment/locale/ca.js","./ca.js":"../../../node_modules/moment/locale/ca.js","./cs":"../../../node_modules/moment/locale/cs.js","./cs.js":"../../../node_modules/moment/locale/cs.js","./cv":"../../../node_modules/moment/locale/cv.js","./cv.js":"../../../node_modules/moment/locale/cv.js","./cy":"../../../node_modules/moment/locale/cy.js","./cy.js":"../../../node_modules/moment/locale/cy.js","./da":"../../../node_modules/moment/locale/da.js","./da.js":"../../../node_modules/moment/locale/da.js","./de":"../../../node_modules/moment/locale/de.js","./de-at":"../../../node_modules/moment/locale/de-at.js","./de-at.js":"../../../node_modules/moment/locale/de-at.js","./de-ch":"../../../node_modules/moment/locale/de-ch.js","./de-ch.js":"../../../node_modules/moment/locale/de-ch.js","./de.js":"../../../node_modules/moment/locale/de.js","./dv":"../../../node_modules/moment/locale/dv.js","./dv.js":"../../../node_modules/moment/locale/dv.js","./el":"../../../node_modules/moment/locale/el.js","./el.js":"../../../node_modules/moment/locale/el.js","./en-au":"../../../node_modules/moment/locale/en-au.js","./en-au.js":"../../../node_modules/moment/locale/en-au.js","./en-ca":"../../../node_modules/moment/locale/en-ca.js","./en-ca.js":"../../../node_modules/moment/locale/en-ca.js","./en-gb":"../../../node_modules/moment/locale/en-gb.js","./en-gb.js":"../../../node_modules/moment/locale/en-gb.js","./en-ie":"../../../node_modules/moment/locale/en-ie.js","./en-ie.js":"../../../node_modules/moment/locale/en-ie.js","./en-il":"../../../node_modules/moment/locale/en-il.js","./en-il.js":"../../../node_modules/moment/locale/en-il.js","./en-in":"../../../node_modules/moment/locale/en-in.js","./en-in.js":"../../../node_modules/moment/locale/en-in.js","./en-nz":"../../../node_modules/moment/locale/en-nz.js","./en-nz.js":"../../../node_modules/moment/locale/en-nz.js","./en-sg":"../../../node_modules/moment/locale/en-sg.js","./en-sg.js":"../../../node_modules/moment/locale/en-sg.js","./eo":"../../../node_modules/moment/locale/eo.js","./eo.js":"../../../node_modules/moment/locale/eo.js","./es":"../../../node_modules/moment/locale/es.js","./es-do":"../../../node_modules/moment/locale/es-do.js","./es-do.js":"../../../node_modules/moment/locale/es-do.js","./es-mx":"../../../node_modules/moment/locale/es-mx.js","./es-mx.js":"../../../node_modules/moment/locale/es-mx.js","./es-us":"../../../node_modules/moment/locale/es-us.js","./es-us.js":"../../../node_modules/moment/locale/es-us.js","./es.js":"../../../node_modules/moment/locale/es.js","./et":"../../../node_modules/moment/locale/et.js","./et.js":"../../../node_modules/moment/locale/et.js","./eu":"../../../node_modules/moment/locale/eu.js","./eu.js":"../../../node_modules/moment/locale/eu.js","./fa":"../../../node_modules/moment/locale/fa.js","./fa.js":"../../../node_modules/moment/locale/fa.js","./fi":"../../../node_modules/moment/locale/fi.js","./fi.js":"../../../node_modules/moment/locale/fi.js","./fil":"../../../node_modules/moment/locale/fil.js","./fil.js":"../../../node_modules/moment/locale/fil.js","./fo":"../../../node_modules/moment/locale/fo.js","./fo.js":"../../../node_modules/moment/locale/fo.js","./fr":"../../../node_modules/moment/locale/fr.js","./fr-ca":"../../../node_modules/moment/locale/fr-ca.js","./fr-ca.js":"../../../node_modules/moment/locale/fr-ca.js","./fr-ch":"../../../node_modules/moment/locale/fr-ch.js","./fr-ch.js":"../../../node_modules/moment/locale/fr-ch.js","./fr.js":"../../../node_modules/moment/locale/fr.js","./fy":"../../../node_modules/moment/locale/fy.js","./fy.js":"../../../node_modules/moment/locale/fy.js","./ga":"../../../node_modules/moment/locale/ga.js","./ga.js":"../../../node_modules/moment/locale/ga.js","./gd":"../../../node_modules/moment/locale/gd.js","./gd.js":"../../../node_modules/moment/locale/gd.js","./gl":"../../../node_modules/moment/locale/gl.js","./gl.js":"../../../node_modules/moment/locale/gl.js","./gom-deva":"../../../node_modules/moment/locale/gom-deva.js","./gom-deva.js":"../../../node_modules/moment/locale/gom-deva.js","./gom-latn":"../../../node_modules/moment/locale/gom-latn.js","./gom-latn.js":"../../../node_modules/moment/locale/gom-latn.js","./gu":"../../../node_modules/moment/locale/gu.js","./gu.js":"../../../node_modules/moment/locale/gu.js","./he":"../../../node_modules/moment/locale/he.js","./he.js":"../../../node_modules/moment/locale/he.js","./hi":"../../../node_modules/moment/locale/hi.js","./hi.js":"../../../node_modules/moment/locale/hi.js","./hr":"../../../node_modules/moment/locale/hr.js","./hr.js":"../../../node_modules/moment/locale/hr.js","./hu":"../../../node_modules/moment/locale/hu.js","./hu.js":"../../../node_modules/moment/locale/hu.js","./hy-am":"../../../node_modules/moment/locale/hy-am.js","./hy-am.js":"../../../node_modules/moment/locale/hy-am.js","./id":"../../../node_modules/moment/locale/id.js","./id.js":"../../../node_modules/moment/locale/id.js","./is":"../../../node_modules/moment/locale/is.js","./is.js":"../../../node_modules/moment/locale/is.js","./it":"../../../node_modules/moment/locale/it.js","./it-ch":"../../../node_modules/moment/locale/it-ch.js","./it-ch.js":"../../../node_modules/moment/locale/it-ch.js","./it.js":"../../../node_modules/moment/locale/it.js","./ja":"../../../node_modules/moment/locale/ja.js","./ja.js":"../../../node_modules/moment/locale/ja.js","./jv":"../../../node_modules/moment/locale/jv.js","./jv.js":"../../../node_modules/moment/locale/jv.js","./ka":"../../../node_modules/moment/locale/ka.js","./ka.js":"../../../node_modules/moment/locale/ka.js","./kk":"../../../node_modules/moment/locale/kk.js","./kk.js":"../../../node_modules/moment/locale/kk.js","./km":"../../../node_modules/moment/locale/km.js","./km.js":"../../../node_modules/moment/locale/km.js","./kn":"../../../node_modules/moment/locale/kn.js","./kn.js":"../../../node_modules/moment/locale/kn.js","./ko":"../../../node_modules/moment/locale/ko.js","./ko.js":"../../../node_modules/moment/locale/ko.js","./ku":"../../../node_modules/moment/locale/ku.js","./ku-kmr":"../../../node_modules/moment/locale/ku-kmr.js","./ku-kmr.js":"../../../node_modules/moment/locale/ku-kmr.js","./ku.js":"../../../node_modules/moment/locale/ku.js","./ky":"../../../node_modules/moment/locale/ky.js","./ky.js":"../../../node_modules/moment/locale/ky.js","./lb":"../../../node_modules/moment/locale/lb.js","./lb.js":"../../../node_modules/moment/locale/lb.js","./lo":"../../../node_modules/moment/locale/lo.js","./lo.js":"../../../node_modules/moment/locale/lo.js","./lt":"../../../node_modules/moment/locale/lt.js","./lt.js":"../../../node_modules/moment/locale/lt.js","./lv":"../../../node_modules/moment/locale/lv.js","./lv.js":"../../../node_modules/moment/locale/lv.js","./me":"../../../node_modules/moment/locale/me.js","./me.js":"../../../node_modules/moment/locale/me.js","./mi":"../../../node_modules/moment/locale/mi.js","./mi.js":"../../../node_modules/moment/locale/mi.js","./mk":"../../../node_modules/moment/locale/mk.js","./mk.js":"../../../node_modules/moment/locale/mk.js","./ml":"../../../node_modules/moment/locale/ml.js","./ml.js":"../../../node_modules/moment/locale/ml.js","./mn":"../../../node_modules/moment/locale/mn.js","./mn.js":"../../../node_modules/moment/locale/mn.js","./mr":"../../../node_modules/moment/locale/mr.js","./mr.js":"../../../node_modules/moment/locale/mr.js","./ms":"../../../node_modules/moment/locale/ms.js","./ms-my":"../../../node_modules/moment/locale/ms-my.js","./ms-my.js":"../../../node_modules/moment/locale/ms-my.js","./ms.js":"../../../node_modules/moment/locale/ms.js","./mt":"../../../node_modules/moment/locale/mt.js","./mt.js":"../../../node_modules/moment/locale/mt.js","./my":"../../../node_modules/moment/locale/my.js","./my.js":"../../../node_modules/moment/locale/my.js","./nb":"../../../node_modules/moment/locale/nb.js","./nb.js":"../../../node_modules/moment/locale/nb.js","./ne":"../../../node_modules/moment/locale/ne.js","./ne.js":"../../../node_modules/moment/locale/ne.js","./nl":"../../../node_modules/moment/locale/nl.js","./nl-be":"../../../node_modules/moment/locale/nl-be.js","./nl-be.js":"../../../node_modules/moment/locale/nl-be.js","./nl.js":"../../../node_modules/moment/locale/nl.js","./nn":"../../../node_modules/moment/locale/nn.js","./nn.js":"../../../node_modules/moment/locale/nn.js","./oc-lnc":"../../../node_modules/moment/locale/oc-lnc.js","./oc-lnc.js":"../../../node_modules/moment/locale/oc-lnc.js","./pa-in":"../../../node_modules/moment/locale/pa-in.js","./pa-in.js":"../../../node_modules/moment/locale/pa-in.js","./pl":"../../../node_modules/moment/locale/pl.js","./pl.js":"../../../node_modules/moment/locale/pl.js","./pt":"../../../node_modules/moment/locale/pt.js","./pt-br":"../../../node_modules/moment/locale/pt-br.js","./pt-br.js":"../../../node_modules/moment/locale/pt-br.js","./pt.js":"../../../node_modules/moment/locale/pt.js","./ro":"../../../node_modules/moment/locale/ro.js","./ro.js":"../../../node_modules/moment/locale/ro.js","./ru":"../../../node_modules/moment/locale/ru.js","./ru.js":"../../../node_modules/moment/locale/ru.js","./sd":"../../../node_modules/moment/locale/sd.js","./sd.js":"../../../node_modules/moment/locale/sd.js","./se":"../../../node_modules/moment/locale/se.js","./se.js":"../../../node_modules/moment/locale/se.js","./si":"../../../node_modules/moment/locale/si.js","./si.js":"../../../node_modules/moment/locale/si.js","./sk":"../../../node_modules/moment/locale/sk.js","./sk.js":"../../../node_modules/moment/locale/sk.js","./sl":"../../../node_modules/moment/locale/sl.js","./sl.js":"../../../node_modules/moment/locale/sl.js","./sq":"../../../node_modules/moment/locale/sq.js","./sq.js":"../../../node_modules/moment/locale/sq.js","./sr":"../../../node_modules/moment/locale/sr.js","./sr-cyrl":"../../../node_modules/moment/locale/sr-cyrl.js","./sr-cyrl.js":"../../../node_modules/moment/locale/sr-cyrl.js","./sr.js":"../../../node_modules/moment/locale/sr.js","./ss":"../../../node_modules/moment/locale/ss.js","./ss.js":"../../../node_modules/moment/locale/ss.js","./sv":"../../../node_modules/moment/locale/sv.js","./sv.js":"../../../node_modules/moment/locale/sv.js","./sw":"../../../node_modules/moment/locale/sw.js","./sw.js":"../../../node_modules/moment/locale/sw.js","./ta":"../../../node_modules/moment/locale/ta.js","./ta.js":"../../../node_modules/moment/locale/ta.js","./te":"../../../node_modules/moment/locale/te.js","./te.js":"../../../node_modules/moment/locale/te.js","./tet":"../../../node_modules/moment/locale/tet.js","./tet.js":"../../../node_modules/moment/locale/tet.js","./tg":"../../../node_modules/moment/locale/tg.js","./tg.js":"../../../node_modules/moment/locale/tg.js","./th":"../../../node_modules/moment/locale/th.js","./th.js":"../../../node_modules/moment/locale/th.js","./tk":"../../../node_modules/moment/locale/tk.js","./tk.js":"../../../node_modules/moment/locale/tk.js","./tl-ph":"../../../node_modules/moment/locale/tl-ph.js","./tl-ph.js":"../../../node_modules/moment/locale/tl-ph.js","./tlh":"../../../node_modules/moment/locale/tlh.js","./tlh.js":"../../../node_modules/moment/locale/tlh.js","./tr":"../../../node_modules/moment/locale/tr.js","./tr.js":"../../../node_modules/moment/locale/tr.js","./tzl":"../../../node_modules/moment/locale/tzl.js","./tzl.js":"../../../node_modules/moment/locale/tzl.js","./tzm":"../../../node_modules/moment/locale/tzm.js","./tzm-latn":"../../../node_modules/moment/locale/tzm-latn.js","./tzm-latn.js":"../../../node_modules/moment/locale/tzm-latn.js","./tzm.js":"../../../node_modules/moment/locale/tzm.js","./ug-cn":"../../../node_modules/moment/locale/ug-cn.js","./ug-cn.js":"../../../node_modules/moment/locale/ug-cn.js","./uk":"../../../node_modules/moment/locale/uk.js","./uk.js":"../../../node_modules/moment/locale/uk.js","./ur":"../../../node_modules/moment/locale/ur.js","./ur.js":"../../../node_modules/moment/locale/ur.js","./uz":"../../../node_modules/moment/locale/uz.js","./uz-latn":"../../../node_modules/moment/locale/uz-latn.js","./uz-latn.js":"../../../node_modules/moment/locale/uz-latn.js","./uz.js":"../../../node_modules/moment/locale/uz.js","./vi":"../../../node_modules/moment/locale/vi.js","./vi.js":"../../../node_modules/moment/locale/vi.js","./x-pseudo":"../../../node_modules/moment/locale/x-pseudo.js","./x-pseudo.js":"../../../node_modules/moment/locale/x-pseudo.js","./yo":"../../../node_modules/moment/locale/yo.js","./yo.js":"../../../node_modules/moment/locale/yo.js","./zh-cn":"../../../node_modules/moment/locale/zh-cn.js","./zh-cn.js":"../../../node_modules/moment/locale/zh-cn.js","./zh-hk":"../../../node_modules/moment/locale/zh-hk.js","./zh-hk.js":"../../../node_modules/moment/locale/zh-hk.js","./zh-mo":"../../../node_modules/moment/locale/zh-mo.js","./zh-mo.js":"../../../node_modules/moment/locale/zh-mo.js","./zh-tw":"../../../node_modules/moment/locale/zh-tw.js","./zh-tw.js":"../../../node_modules/moment/locale/zh-tw.js"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="../../../node_modules/moment/locale sync recursive ^\\.\\/.*$"},"?924d":()=>{},"?3453":()=>{},"?4860":()=>{}}]);
//# sourceMappingURL=4020.f846461f.iframe.bundle.js.map