{"version":3,"file":"8051.e61dabb6.iframe.bundle.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;;;;;;;AASA;;;;;;;;;;;;;;;;;;;AAmBA;AACA;;;;;;;AAOA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;;;;AAIA;;;AAGA;;;;AAIA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;;;;;AAKA;;;;;AAKA;;;AAGA;AACA;AACA;;;AAGA;;;AAGA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;;AAGA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA","sources":["webpack://@openremote/workshop/../../component/or-mwc-components/lib/or-mwc-table.js"],"sourcesContent":["var __decorate=this&&this.__decorate||function(t,e,i,a){var o,n=arguments.length,l=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,i):a;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)l=Reflect.decorate(t,e,i,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(l=(n<3?o(l):n>3?o(e,i,l):o(e,i))||l);return n>3&&l&&Object.defineProperty(e,i,l),l},__awaiter=this&&this.__awaiter||function(t,e,i,a){return new(i||(i=Promise))((function(o,n){function l(t){try{r(a.next(t))}catch(t){n(t)}}function s(t){try{r(a.throw(t))}catch(t){n(t)}}function r(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(l,s)}r((a=a.apply(t,e||[])).next())}))};import{css,html,LitElement,unsafeCSS}from\"lit\";import{customElement,property,state}from\"lit/decorators.js\";import{classMap}from\"lit/directives/class-map.js\";import{until}from\"lit/directives/until.js\";import{MDCDataTable}from\"@material/data-table\";import{when}from\"lit/directives/when.js\";import{DefaultColor3,DefaultColor2,DefaultColor1}from\"@openremote/core\";import{i18next}from\"@openremote/or-translate\";import{InputType}from\"./or-mwc-input\";import{styleMap}from\"lit/directives/style-map.js\";const dataTableStyle=require(\"@material/data-table/dist/mdc.data-table.css\"),style=css`\n\n    :host {\n        width: 100%;\n    }\n\n    :host([hidden]) {\n        display: none;\n    }\n\n    .mdc-data-table {\n        width: 100%;\n        overflow: auto;\n        max-height: 500px;\n    }\n\n    .mdc-data-table__paginated {\n        overflow: hidden;\n        max-height: 700px;\n        justify-content: space-between;\n    }\n    \n    .mdc-data-table__fullheight {\n        height: 100%;\n        max-height: none !important;\n    }\n\n    /* first column should be sticky*/\n    .mdc-data-table.has-sticky-first-column tr th:first-of-type,\n    .mdc-data-table.has-sticky-first-column tr td:first-of-type {\n        z-index: 1;\n        position: sticky;\n        left: 0;\n        background-color: ${unsafeCSS(DefaultColor2)};\n    }\n\n    .mdc-data-table.has-sticky-first-column tr th:first-of-type {\n        z-index: 2;\n    }\n\n    thead th {\n        box-shadow: 0 1px 0 0 rgb(229, 229, 229);\n    }\n\n    .mdc-data-table.has-sticky-first-column tr td:first-of-type {\n        box-shadow: 1px 0 0 0 rgb(229, 229, 229);\n    }\n\n    thead th:first-of-type {\n        box-shadow: 1px 1px 0 0 rgb(229, 229, 229);\n    }\n\n    th {\n        position: sticky;\n        top: 0;\n        background-color: ${unsafeCSS(DefaultColor1)};\n    }\n\n    th, td {\n        cursor: default;\n    }\n\n    .mdc-data-table__header-cell {\n        font-weight: bold;\n        color: ${unsafeCSS(DefaultColor3)};\n        font-size: 14px;\n    }\n\n    .mdc-data-table__pagination-rows-per-page-select {\n        /*min-width: 112px;*/\n    }\n\n    .mdc-data-table__pagination {\n        min-height: 64px;\n    }\n\n    .mdc-data-table__cell--clickable {\n        cursor: pointer;\n    }\n    \n    .sort-button {\n        padding-right: 0;\n        border: none;\n        background-color: ${unsafeCSS(DefaultColor1)};\n        color: ${unsafeCSS(DefaultColor3)};\n        cursor: pointer;\n    }\n\n    .sort-button-reverse {\n        padding-left: 0;\n        border: none;\n        background-color: ${unsafeCSS(DefaultColor1)};\n        color: ${unsafeCSS(DefaultColor3)};\n        cursor: pointer;\n    }\n    \n    .sortable {\n        flex-direction: row;\n        cursor: pointer;\n    }\n    \n    .sortable-reverse {\n        flex-direction: row-reverse;\n        cursor: pointer;\n    }\n    \n    .hidden {\n        visibility: hidden;\n    }\n    \n    #column-1 {\n        width: var(--or-mwc-table-column-width-1, unset);\n    }    \n    #column-2 {\n        width: var(--or-mwc-table-column-width-2, unset);\n    }    \n    #column-3 {\n        width: var(--or-mwc-table-column-width-3, unset);\n    }    \n    #column-4 {\n        width: var(--or-mwc-table-column-width-4, unset);\n    }    \n    #column-5 {\n        width: var(--or-mwc-table-column-width-5, unset);\n    }    \n    #column-6 {\n        width: var(--or-mwc-table-column-width-6, unset);\n    }    \n    #column-7 {\n        width: var(--or-mwc-table-column-width-7, unset);\n    }    \n    #column-8 {\n        width: var(--or-mwc-table-column-width-8, unset);\n    }    \n    #column-9 {\n        width: var(--or-mwc-table-column-width-9, unset);\n    }    \n    #column-10 {\n        width: var(--or-mwc-table-column-width-10, unset);\n    }\n\n    @media screen and (max-width: 768px) {\n        .hide-mobile {\n            display: none;\n        }\n    }\n`;export class OrMwcTableRowClickEvent extends CustomEvent{constructor(t){super(OrMwcTableRowClickEvent.NAME,{detail:{index:t},bubbles:!0,composed:!0})}}OrMwcTableRowClickEvent.NAME=\"or-mwc-table-row-click\";let OrMwcTable=class extends LitElement{constructor(){super(...arguments),this.config={columnFilter:[],stickyFirstColumn:!0,fullHeight:!1,pagination:{enable:!1}},this.paginationIndex=0,this.paginationSize=10,this.sortDirection=\"ASC\",this.sortIndex=-1,this.selectedRows=[],this.indeterminate=!1,this.allSelected=!1}static get styles(){return[css`${unsafeCSS(dataTableStyle)}`,style]}firstUpdated(t){const e=this.shadowRoot.querySelector(\".mdc-data-table\");this._dataTable=new MDCDataTable(e)}updated(t){var e;if((t.has(\"paginationIndex\")||t.has(\"paginationSize\"))&&(null===(e=this.config.pagination)||void 0===e?void 0:e.enable)){const t=this._dataTable?this._dataTable.root.children[0]:this.shadowRoot.querySelector(\".mdc-data-table__table-container\");new IntersectionObserver(((t,e)=>{t[0].target.scrollTop=0,e.unobserve(t[0].target)})).observe(t),this.selectedRows=[],this.indeterminate=!1,this.allSelected=!1}}render(){var t,e,i,a;const o={\"mdc-data-table\":!0,\"mdc-data-table__paginated\":!!(null===(t=this.config.pagination)||void 0===t?void 0:t.enable),\"mdc-data-table__fullheight\":!!this.config.fullHeight,\"has-sticky-first-column\":!!this.config.stickyFirstColumn},n=(null===(e=this.config.pagination)||void 0===e?void 0:e.enable)&&(!!this.rowsTemplate||this.rows&&this.rows.length>this.paginationSize),l=null===(a=null===(i=this.shadowRoot)||void 0===i?void 0:i.firstElementChild)||void 0===a?void 0:a.clientWidth;return html`\n            <div class=\"${classMap(o)}\">\n                <div class=\"mdc-data-table__table-container\" style=\"flex: 1;\">\n                    <table class=\"mdc-data-table__table\">\n                        <!-- Header row that normally includes entries like 'id' and 'name'. You can use either a template or a list of columns -->\n                        ${when(this.columnsTemplate,(()=>this.columnsTemplate),(()=>this.columns?html`\n                                <thead>\n                                <tr class=\"mdc-data-table__header-row\">\n                                    ${this.columns.map(((t,e)=>{const i={maxWidth:l?l/(this.columns.length/2)+\"px\":void 0};return 0==e&&this.config.multiSelect?html` \n                                            <th class=\"mdc-data-table__header-cell mdc-data-table__header-cell--checkbox\"\n                                                role=\"columnheader\" scope=\"col\">\n                                                <div class=\"\">\n                                                    <or-mwc-input type=\"${InputType.CHECKBOX}\" id=\"checkbox-${e}\"\n                                                                  class=\"${classMap({\"mdi-checkbox-intermediate\":this.indeterminate})}\"\n                                                                  .indeterminate=\"${this.indeterminate}\"\n                                                                  @or-mwc-input-changed=\"${t=>this.onCheckChanged(t.detail.value,\"all\")}\" .value=\"${this.allSelected}\">\n                                                    </or-mwc-input>\n                                                </div>\n                                            </th>\n                                            `:\"string\"==typeof t?html`\n                                            <th class=\"mdc-data-table__header-cell ${this.config.multiSelect?\"mdc-data-table__header-cell mdc-data-table__header-cell--checkbox\":\"\"}\" id=\"column-${e+1}\" role=\"columnheader\" scope=\"col\"\n                                                title=\"${t}\">\n                                                ${t}\n                                            </th>\n                                        `:html`\n                                            <th class=\"mdc-data-table__header-cell ${classMap({\"mdc-data-table__cell--numeric\":!!t.isNumeric,\"hide-mobile\":!!t.hideMobile,\"mdc-data-table__header-cell--with-sort\":!!t.isSortable})}\"\n                                                style=\"${styleMap(i)}\"\n                                                role=\"columnheader\" scope=\"col\" title=\"${t.title}\" data-column-id=\"${t.title}\"\n                                                @click=\"${i=>t.isSortable?this.sortRows(i,e,this.sortDirection):\"\"}\">\n                                                ${t.isSortable?until(this.getSortHeader(e,t.title,this.sortDirection,!!t.isNumeric),html`${i18next.t(\"loading\")}`):t.title}\n                                            </th>\n                                        `}))}\n                                </tr>\n                                </thead>\n                            `:void 0))}\n                        <!-- Table content, where either the template or an array of rows is displayed -->\n                        <tbody class=\"mdc-data-table__content\">\n                        ${when(this.rowsTemplate,(()=>{var t;return(null===(t=this.config.pagination)||void 0===t?void 0:t.enable)&&this.updateComplete.then((()=>__awaiter(this,void 0,void 0,(function*(){const t=yield this.getTableElem(!1),e=null==t?void 0:t.querySelectorAll(\"tr\");null==e||e.forEach(((t,e)=>{const i=(e<=this.paginationIndex*this.paginationSize||e>this.paginationIndex*this.paginationSize+this.paginationSize)&&!t.classList.contains(\"mdc-data-table__header-row\");t.style.display=i?\"none\":\"table-row\"}))})))),html`${this.rowsTemplate}`}),(()=>this.rows?this.rows.filter(((t,e)=>{var i;return!(null===(i=this.config.pagination)||void 0===i?void 0:i.enable)||e>=this.paginationIndex*this.paginationSize&&e<this.paginationIndex*this.paginationSize+this.paginationSize})).map((t=>{const e=Array.isArray(t)?t:t.content,i={maxWidth:l?l/(this.columns.length/2)+\"px\":void 0};return html`\n                                                    <tr class=\"mdc-data-table__row\" @click=\"${e=>this.onRowClick(e,t)}\">\n                                                        ${null==e?void 0:e.map(((e,a)=>{var o,n;const l={\"mdc-data-table__cell\":!0,\"mdc-data-table__cell--numeric\":\"number\"==typeof e,\"mdc-data-table__cell--clickable\":!Array.isArray(t)&&t.clickable,\"hide-mobile\":this.columns&&\"string\"!=typeof this.columns[a]&&(null===(o=this.columns[a])||void 0===o?void 0:o.hideMobile)};return 0==a&&this.config.multiSelect?html`\n                                                                    <td class=\"mdc-data-table__cell mdc-data-table__cell--checkbox\" >\n                                                                        <div class=\"\">\n                                                                            <or-mwc-input type=\"${InputType.CHECKBOX}\" id=\"checkbox-${a}\"\n                                                                                          @or-mwc-input-changed=\"${e=>this.onCheckChanged(e.detail.value,\"single\",t)}\" \n                                                                                          .value=\"${null===(n=this.selectedRows)||void 0===n?void 0:n.includes(t)}\"\n                                                                            ></or-mwc-input>\n                                                                        </div>\n                                                                    </td> `:html`\n                                                                <td class=\"${classMap(l)}\" title=\"${e}\" style=\"${styleMap(i)}\">\n                                                                    <span>${e}</span>\n                                                                </td>\n                                                            `}))}\n                                                    </tr>\n                                                `})):void 0))}\n                        </tbody>\n                    </table>\n                </div>\n                <!-- Pagination HTML, shown on the bottom right. Same as Material Design spec -->\n                ${when(n,(()=>{var t;const e=(null===(t=this.config.pagination)||void 0===t?void 0:t.options)||[10,25,100];return html`\n                        <div class=\"mdc-data-table__pagination\">\n                            <div class=\"mdc-data-table__pagination-trailing\">\n                                <div class=\"mdc-data-table__pagination-rows-per-page\">\n                                    <div class=\"mdc-data-table__pagination-rows-per-page-label\">\n                                        ${i18next.t(\"rowsPerPage\")}\n                                    </div>\n                                    <or-mwc-input class=\"mdc-data-table__pagination-rows-per-page-select\"\n                                                  .type=\"${InputType.SELECT}\" compact comfortable outlined .readonly=\"${1===e.length}\"\n                                                  .value=\"${this.paginationSize}\" .options=\"${e}\"\n                                                  @or-mwc-input-changed=\"${t=>{this.paginationSize=t.detail.value,this.paginationIndex=0}}\"\n                                    ></or-mwc-input>\n                                </div>\n                                ${until(this.getPaginationControls(),html`${i18next.t(\"loading\")}`)}\n                            </div>\n                        </div>\n                    `}))}\n            </div>\n        `}onRowClick(t,e){if(this.config.multiSelect){const e=t.target;if(\"OR-MWC-INPUT\"===e.nodeName&&e.id.includes(\"checkbox\"))return}this.dispatchEvent(new OrMwcTableRowClickEvent(this.rows.indexOf(e)))}getSortHeader(t,e,i,a=!1){return __awaiter(this,void 0,void 0,(function*(){return-1===this.sortIndex&&(this.sortIndex=t),html`\n            <div class=\"mdc-data-table__header-cell-wrapper ${a?\"sortable-reverse\":\"sortable\"}\">\n                <div class=\"mdc-data-table__header-cell-label\">\n                    ${e}\n                </div>\n                <button class=\"mdc-icon-button material-icons ${a?\"sort-button-reverse\":\"sort-button\"} ${this.sortIndex===t?\"\":\"hidden\"}\"\n                        aria-label=\"Sort by ${e}\" aria-describedby=\"${e}-status-label\" aria-hidden=\"${!(this.sortIndex===t)}\">\n                    <or-icon icon=\"${\"ASC\"==i?\"arrow-up\":\"arrow-down\"}\"></or-icon>\n                </button>\n                <div class=\"mdc-data-table__sort-status-label\" aria-hidden=\"true\" id=\"${e}-status-label\">\n                </div>\n            </div>\n        `}))}sortRows(t,e,i){return __awaiter(this,void 0,void 0,(function*(){if(this.config.multiSelect){const e=t.target;if(\"OR-MWC-INPUT\"===e.nodeName&&e.id.includes(\"checkbox\"))return}this.sortDirection=\"ASC\"==i?\"DESC\":\"ASC\",i=this.sortDirection,this.sortIndex=e,this.rows&&(\"content\"in this.rows[0]?this.rows.sort(((t,a)=>this.customSort(t.content,a.content,e,i))):this.rows.sort(((t,a)=>this.customSort(t,a,e,i))))}))}customSort(t,e,i,a){return t[i]||e[i]?t[i]?e[i]?\"string\"==typeof t[i]&&\"string\"==typeof e[i]?\"DESC\"==a?e[i].localeCompare(t[i],\"en\",{numeric:!0}):t[i].localeCompare(e[i],\"en\",{numeric:!0}):\"DESC\"==a?t[i]>e[i]?-1:1:t[i]<e[i]?-1:1:-1:1:0}onCheckChanged(t,e,i){var a,o,n,l,s;let r=(null===(a=this.config.pagination)||void 0===a?void 0:a.enable)&&this.rows.length>this.paginationSize?this.paginationSize:this.rows.length;\"all\"===e?t?(this.selectedRows=this.rows?this.rows.filter(((t,e)=>e>=this.paginationIndex*this.paginationSize&&e<this.paginationIndex*this.paginationSize+this.paginationSize)):[],this.indeterminate=!1,this.allSelected=!0):(this.selectedRows=[],this.allSelected=!1,this.indeterminate=!1):(t?-1===this.selectedRows.indexOf(i)&&(this.selectedRows.push(i),this.indeterminate=this.selectedRows.length<((null===(o=this.config.pagination)||void 0===o?void 0:o.enable)?r:this.rows.length)&&this.selectedRows.length>0,this.allSelected=this.selectedRows.length===((null===(n=this.config.pagination)||void 0===n?void 0:n.enable)?r:this.rows.length)&&this.selectedRows.length>0,this.requestUpdate(\"selectedRows\")):this.selectedRows=this.selectedRows.filter((t=>t!==i)),this.indeterminate=this.selectedRows.length<((null===(l=this.config.pagination)||void 0===l?void 0:l.enable)?r:this.rows.length)&&this.selectedRows.length>0,this.allSelected=this.selectedRows.length===((null===(s=this.config.pagination)||void 0===s?void 0:s.enable)?r:this.rows.length)&&this.selectedRows.length>0)}getPaginationControls(){return __awaiter(this,void 0,void 0,(function*(){const t=yield this.getRowCount(),e=this.paginationIndex*this.paginationSize+1;let i=this.paginationIndex*this.paginationSize+this.paginationSize;return i>t&&(i=t),html`\n            <div class=\"mdc-data-table__pagination-navigation\">\n                <div class=\"mdc-data-table__pagination-total\">\n                    <span>${e}-${i} of ${t}</span>\n                </div>\n                <or-mwc-input class=\"mdc-data-table__pagination-button\" .type=\"${InputType.BUTTON}\"\n                              data-first-page=\"true\" icon=\"page-first\" .disabled=\"${0==this.paginationIndex}\"\n                              @or-mwc-input-changed=\"${()=>this.paginationIndex=0}\"></or-mwc-input>\n                <or-mwc-input class=\"mdc-data-table__pagination-button\" .type=\"${InputType.BUTTON}\"\n                              data-prev-page=\"true\" icon=\"chevron-left\" .disabled=\"${0==this.paginationIndex}\"\n                              @or-mwc-input-changed=\"${()=>this.paginationIndex--}\"></or-mwc-input>\n                <or-mwc-input class=\"mdc-data-table__pagination-button\" .type=\"${InputType.BUTTON}\"\n                              data-next-page=\"true\" icon=\"chevron-right\"\n                              .disabled=\"${this.paginationIndex*this.paginationSize+this.paginationSize>=t}\"\n                              @or-mwc-input-changed=\"${()=>this.paginationIndex++}\"></or-mwc-input>\n                <or-mwc-input class=\"mdc-data-table__pagination-button\" .type=\"${InputType.BUTTON}\"\n                              data-last-page=\"true\" icon=\"page-last\"\n                              .disabled=\"${this.paginationIndex*this.paginationSize+this.paginationSize>=t}\"\n                              @or-mwc-input-changed=\"${()=>__awaiter(this,void 0,void 0,(function*(){let e=t/this.paginationSize;e=e.toString().includes(\".\")?Math.floor(e):e-1,this.paginationIndex=e}))}\"\n                ></or-mwc-input>\n            </div>\n        `}))}getRowCount(t=!0,e){var i,a;return __awaiter(this,void 0,void 0,(function*(){return(null===(i=this.rows)||void 0===i?void 0:i.length)?null===(a=this.rows)||void 0===a?void 0:a.length:(e||(e=yield this.getTableElem(t)),(null==e?void 0:e.querySelectorAll(\"tr\")).length)}))}getTableElem(t=!1){return __awaiter(this,void 0,void 0,(function*(){return t&&(yield this.updateComplete),this._dataTable?this._dataTable.root:this.shadowRoot.querySelector(\".mdc-data-table\")}))}};__decorate([property({type:Array})],OrMwcTable.prototype,\"columns\",void 0),__decorate([property({type:Object})],OrMwcTable.prototype,\"columnsTemplate\",void 0),__decorate([property({type:Array})],OrMwcTable.prototype,\"rows\",void 0),__decorate([property({type:Object})],OrMwcTable.prototype,\"rowsTemplate\",void 0),__decorate([property({type:Array})],OrMwcTable.prototype,\"config\",void 0),__decorate([property({type:Number})],OrMwcTable.prototype,\"paginationIndex\",void 0),__decorate([property({type:Number})],OrMwcTable.prototype,\"paginationSize\",void 0),__decorate([state()],OrMwcTable.prototype,\"_dataTable\",void 0),__decorate([property({type:String})],OrMwcTable.prototype,\"sortDirection\",void 0),__decorate([property({type:Number})],OrMwcTable.prototype,\"sortIndex\",void 0),__decorate([property({type:Array})],OrMwcTable.prototype,\"selectedRows\",void 0),__decorate([property()],OrMwcTable.prototype,\"indeterminate\",void 0),__decorate([property()],OrMwcTable.prototype,\"allSelected\",void 0),OrMwcTable=__decorate([customElement(\"or-mwc-table\")],OrMwcTable);export{OrMwcTable};"],"names":[],"sourceRoot":""}